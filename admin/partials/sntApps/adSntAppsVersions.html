<section class="content current admin-scrollfix" div-touch-move-stop-propogate ng-click='clearErrorMessage()' ng-show="screenMode === 'BUILD_LIST'">
    <div>
        <header class="content-title float">
            <h2> App versions </h2>
            <a ng-click="goBackToPreviousState()" class="action back ng-scope" translate="">Services</a>
            <a class="action" ng-click="showGeneralSettings()" style="background-image:none;color:black;">Settings</a>
            <a class="action add" ng-click="changeToUploadBuildMode()">Upload new build</a>
            <div class="filters">
                <div class="filter select" style="width:200px;">
                    <div class="entry">
                        <div class="select" style="width:200px;">
                            <select class="placeholder" ng-model="filterType" ng-options="opt.value for opt in filterList" ng-change="appTypeChanged()" style="width:200px;">
                                <option value="">Filter by App Type</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <section class="content-scroll">
            <div ng-include="'/assets/partials/common/notification_message.html'"></div>
            <div ng-include="'/assets/partials/common/notification_success_message.html'"></div>
            <!--ng-table component -->
            <div class="wrapper">
                <table id="brands" class="grid " ng-table="tableParams" template-pagination="">
                    <thead>
                        <tr>
                            <th width="30%" rowspan="2">
                                <div><i class="glyphicon glyphicon-user"></i> <span>App version</span></div>
                            </th>
                            <th width="30%" rowspan="2">
                                <div><span>Updated on</span></div>
                            </th>
                            <th width="40%" rowspan="2">
                                <div><span>Description</span></div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="app in $data | filter:filterDevices" ng-click="editApp(app,  $index)" style="cursor: pointer;">
                            <td ng-class="{'grey-bg': $index !== 0}">
                                {{app.version}}
                            </td>
                            <td ng-class="{'grey-bg': $index !== 0}">
                                {{app.updated_on}}
                            </td>
                            <td ng-class="{'grey-bg': $index !== 0}">
                                {{app.description}}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        <!--end -->
    </div>
</section>
<section class="content current" ng-show="screenMode === 'ADD_BUILD' || screenMode === 'EDIT_BUILD'">
    <header class="content-title float">
        <h2 ng-show="screenMode === 'ADD_BUILD'">Upload Build</h2>
        <h2 ng-hide="screenMode === 'ADD_BUILD'">Edit Build</h2>
        <a ng-click="changeToListView()" class="action back ng-scope" translate="">Versions</a>
        <div class="filters" ng-show="screenMode === 'ADD_BUILD'">
            <div class="filter select">
                <div class="entry">
                    <div class="select">
                        <select class="placeholder" ng-model="filterType" ng-options="opt.name for opt in filterList">
                            <option value="">Filter by App Type</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <section class="content-scroll">
        <div class="form">
            <fieldset class="holder left">
                <div class="entry full-width">
                    <label for="certificate">Upload Buid </label>
                    <div class="file-upload">
                        <span class="input">{{fileName}}</span>
                        <input type="file" ng-model="selectedApp.build" accept="*" app-filereader />
                        <button type="button" class="button brand-colors">
                            Attach
                        </button>
                    </div>
                </div>
                <ad-textbox value="selectedApp.version" label="{{ 'APP_VERSION' | translate}}" styleclass="full-width"></ad-textbox>
                <ad-textarea rows="4" div-class="full-width" text-area-class="full-width" value="selectedApp.description" label="{{ 'DESCRIPTION' | translate}}" placeholder=""></ad-textarea>
            </fieldset>
            <div class="actions float">
                <button type="button" id="cancel" class="button blank add-data-inline" ng-click="changeToListView()" translate>
                    CANCEL
                </button>
                <button type="button" like-type="common" id="update" class="button red white-text" ng-click="deleteBuild(selectedApp)" ng-show="screenMode === 'EDIT_BUILD'" translate>
                    DELETE
                </button>
                <button type="button" like-type="common" id="update" class="button green" ng-click="uploadBuild()" translate>
                    SAVE_CHANGES
                </button>
            </div>
        </div>
    </section>
</section>

<section class="content current" ng-show="screenMode === 'SETTINGS'" ng-click='clearErrorMessage()'>
    <header class="content-title float">
        <h2>Settings</h2>
        <a ng-click="changeToListView()" class="action back ng-scope" translate="">App Versions</a>
    </header>
    <section class="content-scroll">
        <div ng-include="'/assets/partials/common/notification_message.html'"></div>
        <div ng-include="'/assets/partials/common/notification_success_message.html'"></div>
        <div class="form">
            <fieldset class="holder full-width">
                <div class="form-title">
                    <h3>App upgrade times</h3>
                </div>
                <div class="form-subtitle-title">
                    <h6>Please note that the following times are the local times for the applications to start auto upgrading.</h6>
                </div>
                <table style="width:50%;border: 1px solid rgba(0,0,0,.1);">
                    <tr style="border: 1px solid rgba(0,0,0,.1);font-weight:700;">
                        <th style="padding: 10px;border: 1px solid rgba(0,0,0,.1);">App type</th>
                        <th style="padding: 10px;border: 1px solid rgba(0,0,0,.1);">Time</th>
                    </tr>
                    <tr ng-repeat="app in appTypesList" style="border: 1px solid rgba(0,0,0,.1);">
                        <td style="padding: 10px;border: 1px solid rgba(0,0,0,.1);">{{app.value}}</td>
                        <td style="padding: 10px;border: 1px solid rgba(0,0,0,.1);">
                            <div class="entry" style="float:none;margin:0 auto;">
                            <div class="select">
                                <select ng-model="app.app_upgrade_time">
                                    <option value="">SELECT</option>
                                    <option value="{{time}}" ng-repeat="time in timings">{{time}}</option>
                                </select>
                            </div>
                             </div>
                        </td </tr>
                </table>
            </fieldset>
            <div class="actions float">
                <button type="button" id="cancel" class="button blank add-data-inline" ng-click="changeToListView()" translate>
                    CANCEL
                </button>
                <button type="button" like-type="common" id="update" class="button  ng-binding green" ng-click="updateUpgradeTime()" translate>
                    SAVE_CHANGES
                </button>
            </div>
        </div>
    </section>
</section>
