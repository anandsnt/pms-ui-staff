<table class="grid sub-grid">
	<tr ng-hide="showDepositForm || !showDepositList" ng-repeat="rule in depositRuleslList">
		<td class="offset"> &nbsp; </td>
		<td ng-click="editSingleDepositeRule(rule)"><a href>{{ rule.name }}</a></td>
		<td>{{ rule.description }}</td>
		<td width="10" class="delete">
			<a class="icons icon-delete large-icon" ng-click="deleteDepositeRule(rule)" translate>DELETE_RULE</a>
		</td>
	</tr>

	<tr id="add-new" class="edit-data" ng-show="showDepositForm">
		<td class="offset"> &nbsp; </td>
		<td>
			<div class="data-holder">
				<form id="add-deposit-rule" class="form inline-form float">
					<div class="form-title">
						<h3>
							<span>{{ rulesTitle }}</span>
							{{ rulesSubtitle }}
						</h3>
						<em class="status">
							{{'MANDATORY_FIELDS_MESSAGE1'| translate}}
							<strong>*</strong>
							{{'MANDATORY_FIELDS_MESSAGE2'| translate}}
						</em>
					</div>
					<div id="deposit-details" class="float">
						<fieldset class="holder left">
							<ad-textbox styleclass="full-width" value="singleRule.name" name="name" id="name"
								label="Policy name" placeholder="{{'ENTER_THE_POLICY_NAME'|translate}}" required="yes">
							</ad-textbox>
							<div class="entry radio-check">
								<label class="checkbox">
									<span class="icon-form icon-checkbox"
										ng-class="{ checked : singleRule.allow_deposit_edit }"></span>
									<label>Allow editing of Deposit Payment</label>
									<input type="checkbox" ng-model="singleRule.allow_deposit_edit">
								</label>
							</div>
							<div class="entry radio-check">
								<label class="checkbox">
									<span class="icon-form icon-checkbox"
										ng-class="{ checked : singleRule.apply_to_all_bookings }"></span>
									<label translate>APPLY_TO_ALL_BOOKINGS</label>
									<input type="checkbox" ng-model="singleRule.apply_to_all_bookings">
								</label>
							</div>
							<div class="entry radio-check clear-both">
								<label class="checkbox">
									<span class="icon-form icon-checkbox"
										ng-class="{ checked : singleRule.no_deposit_req_on_reservations_with_routed_charge }"></span>
									<label translate>NO_DEPOSIT_REQUEST_ON_RESERVATIONS_WITH_ROUTED_CHARGE</label>
									<input type="checkbox"
										ng-model="singleRule.no_deposit_req_on_reservations_with_routed_charge">
								</label>
							</div>

						</fieldset>
						<fieldset class="holder right">
							<ad-textarea rows="4" div-class="full-width" text-area-class="full-width"
								value="singleRule.description" name="desc" id="desc" label="Description"
								placeholder="{{'ENTER_THE_POLICY_DESC'|translate}}" required="yes"></ad-textarea>
							<ad-textarea rows="4" div-class="full-width" text-area-class="full-width"
								value="singleRule.description_trl" name="desc" id="desc" label="{{ 'DESCRIPTION_TRANSLATED' | translate}}"
								placeholder="{{'ENTER_TRANSLATIONS_FOR_DESCRIPTION'|translate}}"
								hide="availableLanguagesSet.show_language_field"></ad-textarea>
						</fieldset>
					</div>
					<div id="deposit-schedules" class="float">
						<fieldset class="holder left">
							<ul id="schedules-menu" class="boxes" role="tablist">
								<li role="tab" ng-repeat="schedule in singleRule.schedules"
									ng-click="selectSchedule($index)"
									ng-class="{ selectedschedule : selectedScheduleIndex==$index }">
									SCHEDULE #{{$index+1}}
									<button type="button" class="icons icon-delete" ng-click="deleteSchedule($index)"
										translate="">Delete this rule</button>
								</li>
							</ul>
							<button type="button" class="add-new-button" ng-click="addNewSchedule()" translate>+ Add
								Schedule</button>
						</fieldset>
						<fieldset class="holder right">
							<ad-textbox value="selectedSchedule.amount" name="amount" id="amount"
								label="Amount[{{ currencySymbol }}]" placeholder="{{'ENTER_THE_AMT'|translate}}"
								required="yes"></ad-textbox>
							<div class="entry">
								<label for="amount-type-id">
									{{'AMOUNT_TYPE'|translate}}
									<strong>*</strong>
								</label>
								<div class="select">
									<select name="amount-type-id" id="amount-type-id"
										ng-model="selectedSchedule.amount_type">
										<option value="" data-text="Not set" class="placeholder">Choose amount type
										</option>
										<option value="amount">{{'AMOUNT'|translate}}[{{ currencySymbol }}]</option>
										<option value="percent" translate>PERCENTAGE</option>
										<option value="day" translate>NIGHTS</option>
									</select>
								</div>
							</div>
							<div class="entry" ng-class="{disabled : selectedSchedule.amount_type !== 'percent'}">
								<label for="amount-type-id">
									{{'PER_NIGHT_OR_STAY'|translate}}
									<strong>*</strong>
								</label>
								<div class="select">
									<select name="amount-type-id" id="amount-type-id"
										ng-model="selectedSchedule.post_type_id"
										ng-options="type.id as type.description for type in postTypes"
										ng-disabled="selectedSchedule.amount_type !== 'percent'">
										<option value="" data-text="Not set" class="placeholder" translate>
											CHOOSE_NIGHT_OR_STAY</option>
									</select>
								</div>
							</div>
							<ad-textbox value="selectedSchedule.max_no_nights" name="name" id="name"
								label="Max Number of Nights" placeholder="Max Number of Nights "></ad-textbox>
							<div class="entry">
								<label for="amount-type-id">
									{{'DAYS_IN_ADVANCE'|translate}}
								</label>
								<div class="select">
									<select name="amount-type-id" id="amount-type-id"
										ng-model="selectedSchedule.advance_days_selection"
										ng-options="type.id as type.description for type in dayInAdvanceSelections"
										ng-change="daysInAdvanceSelectionChanged()">
										<option value="" data-text="Not set" class="placeholder" translate>
											CHOOSE_DAYS_IN_ADVANCE</option>
									</select>
								</div>
							</div>
							<ad-textbox ng-if="selectedSchedule.advance_days_selection === 'custom'"
								value="selectedSchedule.advance_days" name="name" id="name"
								label="{{ 'NO_OF_DAYS_IN_ADVACNE' | translate }}"
								placeholder="{{'ENTER_THE_NUM_OF_DAYS'|translate}}" inputtype="number"></ad-textbox>
							<div ng-if="selectedSchedule.advance_days === 0"
								class="entry radio-check actions_margin_top">
								<label class="checkbox">
									<span class="icon-form icon-checkbox"
										ng-class="{ checked : selectedSchedule.exclude_from_auto_collection }"></span>
									<label>Exclude from auto collection</label>
									<input type="checkbox" ng-model="selectedSchedule.exclude_from_auto_collection">
								</label>
							</div>
							<!--CICO-40120 Leave this comment till this functionality is implemented-->
							<!--The checkbox mapping auto_charge_on_due_date in the form has been removed as a part of CICO-40120-->
							<!--The checkbox markup can be obtained from https://github.com/StayNTouch/pms/blob/28163bd6fca31db7dd735ae687f0b57d1cedbfad/app/assets/admin/partials/rulesRestriction/adDepositRequestRules.html#L88-L94-->
							<!--CICO-40120-->
						</fieldset>
					</div>

					<div class="actions float">
						<button type="button" id="cancel" class="button blank add-data-inline" ng-click="cancelCliked()"
							translate>CANCEL</button>
						<button type="button" like-type="common" id="update" class="button green add-data-inline"
							ng-click="saveUpdateDepositeRule('Deposit Requests')" translate>SAVE_CHANGES</button>
					</div>
				</form>
			</div>
		</td>
	</tr>
</table>