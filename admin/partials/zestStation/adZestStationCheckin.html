<div id="wrapper" class="content current admin-scrollfix" div-touch-move-stop-propogate ng-click="clearErrorMessage()">
    <header class="content-title float">
        <h2 translate>ZESTSTATION_TITLE_CHECKIN</h2>
        <a ng-click="goBackToPreviousState()" class="action back" translate>STATION_BACK</a>
    </header>
    <section class="content-scroll">
        <div ng-include="'/assets/partials/common/notification_message.html'"></div>
        <div ng-include="'/assets/partials/common/notification_success_message.html'"></div>
        <form class="form float">
            <!-- Guest delivery options -->
            <fieldset class="holder left">
                <div class="form-title full-width">
                    <h3><span translate>REG_CARD_DELIVERY</span> </h3>
                </div>
                <ad-checkbox is-checked="zestSettings.registration_card.email" label="{{ 'EMAIL' | translate}}"></ad-checkbox>
                <ad-checkbox is-checked="zestSettings.registration_card.print" label="{{ 'PRINT' | translate}}"></ad-checkbox>
                <ad-checkbox is-checked="zestSettings.registration_card.auto_print" label="{{ 'AUTO_PRINT' | translate}}"></ad-checkbox>
            </fieldset>
            <fieldset class="holder right">
                <div class="form-title full-width">
                    <h3><span translate>OFFER_EARLY_CHECKIN</span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.offer_early_checkin" label="{{'OFFER_EARLY_CHECKIN'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>
            <fieldset class="holder left ">
                <div class="form-title full-width">
                    <h3><span translate>REG_CARD</span> </h3>
                </div>
                <ad-textbox value="zestSettings.kiosk_reg_card_email_subject"  label="{{'CUSTOM_REG_CARD_EMAIL_SUBJECT'| translate}}" placeholder="" styleclass="full-width"></ad-textbox>
                <ad-textbox value="zestSettings.kiosk_reg_card_heading_text"  label="{{'CUSTOM_REG_CARD_HEADING'| translate}}" placeholder="" styleclass="full-width"></ad-textbox>
                <ad-textbox value="zestSettings.kiosk_reg_card_room_pin_text"  label="{{'ROOM_PIN_PREFIX_TEXT'| translate}}" placeholder="" styleclass="full-width" hide="!zestSettings.show_room_pin"></ad-textbox>
                <div class="entry full-width">
                    <label translate>
                        REG_CARD_TEXT
                    </label>
                    <textarea class="full-width terms_height" type="" ng-model="zestSettings.reg_card_text"></textarea>
                </div>
            </fieldset>
            <fieldset class="holder right">
                <div class="form-title full-width">
                    <h3><span translate>ON_SCREEN_ROOM_NUMBER </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.show_room_number" label="{{'ON_SCREEN_ROOM_NUMBER'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>
            <fieldset class="holder left">
                <div class="form-title full-width">
                    <h3><span translate>COLLECT_USER_NATIONALITY </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.check_in_collect_nationality" label="{{'COLLECT_USER_NATIONALITY'| translate}}" div-class="full-width"></ad-toggle-button>
                <ad-form-sub-title title="COUNRTY_FILTER_INSTRUCTIONS" hide="!zestSettings.check_in_collect_nationality"></ad-form-sub-title>
                <ad-checkbox is-checked="zestSettings.kiosk_enforce_country_sort" 
                                label="{{'ENFORCE_COUNTRY_SORT'| translate}}" 
                                div-class="full-width" 
                                is-disabled="zestSettings.use_free_form_country_selection" 
                                is-hide="!zestSettings.check_in_collect_nationality"></ad-checkbox>
                <ad-checkbox is-checked="zestSettings.use_free_form_country_selection" 
                                label="{{'FREE_FORM_COUNTRY_SELECT'| translate}}" 
                                div-class="full-width" 
                                is-disabled="zestSettings.kiosk_enforce_country_sort" 
                                is-hide="!zestSettings.check_in_collect_nationality"></ad-checkbox>
            </fieldset>
            <fieldset class="holder right">
                <div class="form-title full-width">
                    <h3><span translate>SECOND_AUTHENTICATION</span> </h3>
                </div>
                <ad-checkbox is-checked="zestSettings.checkin_screen.authentication_settings.departure_date" label="{{ 'DEPARTURE_DATE' | translate}}"></ad-checkbox>
                <ad-checkbox is-checked="zestSettings.checkin_screen.authentication_settings.email" label="{{ 'EMAIL' | translate}}"></ad-checkbox>
                <ad-checkbox is-checked="zestSettings.checkin_screen.authentication_settings.confirmation" label="{{ 'CONFIRMATION' | translate}}"></ad-checkbox>
                <ad-checkbox is-checked="zestSettings.checkin_screen.authentication_settings.number_of_nights" label="{{ 'AUTH_NO_OF_NIGHTS' | translate}}"></ad-checkbox>
            </fieldset>
            <fieldset class="holder left">
                <div class="form-title full-width">
                    <h3><span translate>OWS_GUEST_MESSAGES </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.is_kiosk_ows_messages_active" label="{{'OWS_GUEST_MESSAGES'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>


            <fieldset class="holder right">
                <div class="form-title full-width">
                    <h3><span translate>CREDIT_CARD_AND_PAYMENT_OPTIONS </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.bypass_cc_for_prepaid_reservation" label="{{'BYPASS_CC_FOR_PREPAID_RESERVATIOIN'| translate}}"></ad-toggle-button>
                <ad-toggle-button is-checked="zestSettings.enforce_deposit" label="{{'ENFORCE_DEPOSIT'| translate}}"></ad-toggle-button>
                <ad-toggle-button is-checked="zestSettings.bypass_kiosk_signature" label="{{'BYPASS_SIGNATURE_CAPTURE'| translate}}"></ad-toggle-button>
                <ad-toggle-button is-checked="zestSettings.bypass_kiosk_cc_auth" label="{{'BYPASS_CC_AUTH'| translate}}"></ad-toggle-button>
                <ad-toggle-button is-checked="zestSettings.kiosk_prevent_non_cc_guests" label="{{'SEND_NON_CC_TO_STAFF'| translate}}"></ad-toggle-button>
            </fieldset>


            <fieldset class="holder left">
                <div class="form-title full-width">
                    <h3><span translate>DISPLAY_TERMS_AND_CONDITIONS </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.kiosk_display_terms_and_condition" label="{{'DISPLAY_TERMS_AND_CONDITIONS'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>

            <fieldset class="holder right">
                <div class="form-title full-width">
                    <h3><span translate>VALIDATE_FIRST_NAME </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.kiosk_validate_first_name" label="{{'VALIDATE_FIRST_NAME'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>


            <fieldset class="holder left">
                <div class="form-title full-width">
                    <h3><span translate>ADD_UPDATE_GUEST_DETAILS </span> </h3>
                </div>
                <!-- <ad-toggle-button is-checked="zestSettings.kiosk_add_remove_guests" label="{{'USE_ADD_REMOVE_GUESTS'| translate}}" div-class="full-width"></ad-toggle-button> -->
                <ad-toggle-button is-checked="zestSettings.kiosk_collect_guest_address" label="{{'COLLECT_GUEST_ADDRESS'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>

            <fieldset class="holder right">
                <div class="form-title full-width">
                    <h3>
                        <span translate>ADD_LOYALTY_PGMS</span>
                    </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.add_loyalty_pgms" label="{{'ADD_LOYALTY_PGMS'| translate}}" div-class="full-width"></ad-toggle-button>
            </fieldset>

            <fieldset class="holder left" ng-if="zestSettings.is_snt_id_scan_enabled">
                <div class="form-title full-width">
                    <h3><span translate>SCAN_ID_TO_FIND_RESERVATION </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.scan_id_to_find_reservations" div-class="full-width"></ad-toggle-button>
            </fieldset>

            <fieldset class="holder left" >
                <div class="form-title full-width">
                    <h3><span translate>STATION_PASSPORT_ENTRY_HEADER </span> </h3>
                </div>
                <ad-toggle-button is-checked="zestSettings.enable_passport_entry" label="{{'STATION_PASSPORT_ENTRY_BYPASS_LABEL'| translate}}"  div-class="full-width"></ad-toggle-button>

                <div ng-if="zestSettings.enable_passport_entry">
                <table class="grid">
                                <td>
                                    <span class="toggle" ng-click="toggleRulesListShow()"></span>
                                    <label class="inline" ng-click="toggleRulesListShow()" translate> STATION_PASSPORT_ENTRY_BYPASS_LABEL </label>
                                    <em class="action add" ng-click="openPassportNumberBypassView()" ng-show="zestSettings.bypass_passport_entry" translate>ADD_NEW_REASON </em>
                                </td>
                                <td class="activate text-left">
                                    <div class="entry">
                                        <div class="switch-button single"
                                                ng-class="{ on: zestSettings.bypass_passport_entry }">
                                            <input type = "checkbox"
                                                    ng-model = "zestSettings.bypass_passport_entry">
                                            <span class="switch-icon"></span>
                                        </div>
                                    </div>
                                </td>
                </table>
                <div ng-if = "(addNewPassportNumberBypassReason || editPassportNumberBypassReason) && zestSettings.bypass_passport_entry">
                    <ad-textbox value="passportBypassReason.description"  label="{{'STATION_PASSPORT_ENTRY_BYPASS_REASON_LABEL'| translate}}" placeholder="" styleclass="full-width"></ad-textbox>
                    <div class="actions float">
                        <button type="button" id="cancel" class="button blank add-data-inline" ng-click="cancelPassportBypassReason()"
                            translate>CANCEL</button>
                        <button type="button" like-type="common" id="update" class="button green add-data-inline"
                            ng-click="savePassportBypassReason()" translate>SAVE</button>
                    </div>
                </div>
                <div ng-if = "!(addNewPassportNumberBypassReason || editPassportNumberBypassReason) && zestSettings.bypass_passport_entry">
                    <table class="grid sub-grid">
                        <tr  ng-repeat="reason in zestSettings.passport_bypass_reasons">
                            <td class="offset"> &nbsp; </td>
                            <td ng-click="editPassportBypassReason(reason)"><a href>{{ reason.description }}</a></td>
                            <td width="10" class="delete">
                                <a class="icons icon-delete large-icon" ng-click="deletePassportBypassReason(reason)" translate>DELETE_R</a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            </fieldset>

            <fieldset class="holder full-width" ng-if="::isKioskExcludePaymentMethods">
                <div class="form-title">
                    <h3>
                        <span translate>EXCLUDE</span>
                        {{ 'PAYMENT_TYPES' |  translate }}
                    </h3>
                </div>
                <div class="entry has-sortable" style="width: 48%; margin-right: 2%;">
                    <label class="center_align">
                        <em class="rate_roomtype_text" translate="ALLOWED_PAYMENT_TYPES"></em>
                    </label>
                    <ul class="boxes sortable ui-sortable short-list"  data-type="target"  data-drop="true" ng-model="allowedPaymentTypes" style="overflow-y: scroll !important;" jqyoui-droppable="{multiple:true}" data-jqyoui-options="{accept:'.exclude-payment-types'}">
                        <li ng-repeat="paymentType in allowedPaymentTypes" data-drag="true" ng-model="allowedPaymentTypes" jqyoui-draggable="{index: {{$index}}, animate:false, onStart:'hideCurrentDragItem', onStop:'showCurrentDragItem'}" data-jqyoui-options="{revert: 'invalid', helper:'clone',appendTo: 'body'}" class="allowed-payment-types li-draggable">
                            <span class="icons icon-handle"></span>
                            <span class="icons icon-handle"></span>
                            {{ paymentType.description }}
                        </li>
                    </ul>
                </div>
                <div class="entry has-sortable" style="width: 48%;">
                    <label class="center_align">
                        <em class="rate_roomtype_text" translate="EXCLUDED_PAYMENT_TYPES"></em>
                    </label>
                    <ul class="boxes sortable ui-sortable short-list" data-type="source" data-drop="true" ng-model="excludedPaymentTypes" jqyoui-droppable="{multiple:true}" data-jqyoui-options="{accept:'.allowed-payment-types'}">
                        <li ng-repeat="paymentType in excludedPaymentTypes" class="exclude-payment-types li-draggable" data-jqyoui-options="{revert: 'invalid', helper:'clone',appendTo: 'body'}" data-drag="true" ng-model="excludedPaymentTypes" jqyoui-draggable="{index: {{$index}}, animate:false, onStart:'hideCurrentDragItem', onStop:'showCurrentDragItem' }">
                            <span class="icons icon-handle"></span>
                            <span class="icons icon-handle"></span>
                            {{ paymentType.description }}
                        </li>
                    </ul>
                </div>
            </fieldset>


            <div class="actions float">
                <button type="button" id="cancel" class="button blank add-data-inline" ng-click="goBackToPreviousState()" translate>
                    CANCEL
                </button>
                <button type="button" like-type="common" id="update" class="button ng-binding green" ng-click="saveSettings()" translate>
                    SAVE_CHANGES
                </button>
            </div>
        </form>
    </section>
</div>
