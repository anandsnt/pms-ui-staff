<section id="replacing-div-second" class="content current" ng-hide="isLoading" ng-cloak ng-click="clearErrorMessage()">
    <div>
        <header class="content-title float">
            <h2 translate>Promotions</h2>
            <a ng-click="goBackToPreviousState()" class="action back" translate>BACK</a>
            <a class="action add" ng-hide="!state.is_use_promos" ng-click="addPromo()" translate>ADD_NEW</a>
            <ad-toggle-button is-checked="state.is_use_promos" button-class="activation" div-class="header-title" ng-click="toggleActivatepromos()" label="Activate promotions">
            </ad-toggle-button>
        </header>
        <section class="content-scroll">
            <div ng-include="'/assets/partials/common/notification_message.html'"></div>
            <div id="add-new" ng-show="state.current == 'NEW'" ng-include="'/assets/partials/rates/adAddPromotions.html'"></div>
            <div id="new-form-holder"></div>
            <table id="brands" class="grid datatable dataTable" ng-table="promotionsList" template-pagination="nil">
                <tbody>
                    <tr ng-repeat="promo in state.promotions track by $index">
                        <td data-item="1" data-title="'Name'" ng-click="onEditPromo(promo, $index)" header-class="width-26" ng-hide="state.current === $index">
                            <a class="edit-data-inline">{{promo.name}}</a>
                        </td>
                        <td data-item="2" data-title="'From Date'" ng-click="onEditPromo(promo, $index)" header-class="width-18" ng-hide="state.current === $index">
                            <a class="edit-data-inline">{{promo.from_date | date:dateFormat}}</a>
                        </td>
                        <td data-item="3" data-title="'To Date'" ng-click="onEditPromo(promo, $index)" header-class="width-18" ng-hide="state.current === $index">
                            <a class="edit-data-inline">{{promo.to_date | date:dateFormat}}</a>
                        </td>
                        <td data-item="4" data-title="'Discount'" ng-click="onEditPromo(promo, $index)" header-class="width-18" ng-hide="state.current === $index">
                            <a class="edit-data-inline">{{getDiscountText(promo.discount)}}</a>
                        </td>
                        <td data-item="5" data-title="'Status'" class="" header-class="width-10" ng-hide="state.current === $index">
                            <div class="entry">
                                <div class="switch-button single" ng-class="{ on: promo.is_active }">
                                    <input type="checkbox" id="rates-addons" name="rates-addons" ng-click="onToggleActivation(promo)">
                                    <span class="switch-icon"></span>
                                </div>
                            </div>
                        </td>
                        <td data-item="6" header-class="width-10" data-title="'Delete'" class="delete" ng-hide="state.current === $index">
                            <a class="icons icon-delete large-icon" ng-click="deletepromo(promo)">Delete this Segment</a>
                        </td>
                        <td colspan="6" ng-show="state.current === $index">
                            <div style="display: block;" id="add-new" class="edit-data">
                                <div class="data-holder">
                                    <!-- Edit promo -->
                                    <form class="form inline-form float">
                                        <div class="form-title">
                                            <h3 translate><span></span> EDIT PROMOTION</h3>
                                            <em class="status">{{'MANDATORY_FIELDS_MESSAGE1' | translate}}<strong>*</strong> {{'MANDATORY_FIELDS_MESSAGE2' | translate}} </em>
                                        </div>
                                        <fieldset class="holder left float">
                                            <ad-textbox value="promo.name" label="{{'NAME' | translate}}" placeholder="{{'SEGMENTS_NAME_PLACEHOLDER' | translate}}" required="yes"></ad-textbox>
                                            <ad-textbox value="promo.name" label="{{'CODE' | translate}}" placeholder="{{'PROMO CODE' | translate}}" required="yes"></ad-textbox>
                                            <div class="entry has-datepicker margin">
                                                <label>{{'FROM_DATE' | translate}}
                                                </label>
                                                <input type="text" ng-model="promo.from_date" readonly="" placeholder="Select Start Date" class="date-picker-input-small">
                                                <button ng-click="popupCalendar('FROM')" class="ui-datepicker-trigger date-picker-small ui-datepicker-trigger-btn" type="button">
                                                    ...
                                                </button>
                                                <div class="date-delete-wrapper">
                                                    <span class="icons delete_small rate_end_delete cursor_pointer date-delete" ng-click="resetDate('FROM')">&nbsp;</span>
                                                </div>
                                            </div>
                                            <div class="entry has-datepicker margin">
                                                <label>{{'TO_DATE' | translate}}
                                                </label>
                                                <input type="text" ng-model="promo.to_date" readonly="" placeholder="Select End Date" class="date-picker-input-small">
                                                <button ng-click="popupCalendar('TO')" class="ui-datepicker-trigger date-picker-small ui-datepicker-trigger-btn" type="button">
                                                    ...
                                                </button>
                                                <div class="date-delete-wrapper">
                                                    <span class="icons delete_small rate_end_delete cursor_pointer date-delete" ng-click="resetDate('TO')">&nbsp;</span>
                                                </div>
                                            </div>
                                            <div class="entry">
                                                <ad-textbox styleclass="full-width" value="promo.discount.value" name="amount" id="amount" label="Amount[{{ currencySymbol }}]" placeholder="{{'ENTER_THE_AMT'|translate}}"></ad-textbox>
                                            </div>
                                            <div class="entry">
                                                <div class="entry full-width">
                                                    <label for="amount-type-id">
                                                        {{'AMOUNT_TYPE'|translate}}
                                                    </label>
                                                    <div class="select">
                                                        <select name="amount-type-id" id="amount-type-id" ng-model="promo.discount.type">
                                                            <option value="" data-text="Not set" class="placeholder">Choose amount type</option>
                                                            <option value="AMOUNT">{{'AMOUNT'|translate}}[{{ currencySymbol }}]</option>
                                                            <option value="PERCENTAGE" translate>PERCENTAGE</option>                                                            <
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                        <fieldset class="holder right float">
                                            <div class="entry">
                                                <label>LINKED RATES</label>
                                                <div multi-select input-model="state.rates" button-label="name" item-label="name" tick-property="ticked" max-labels="0" default-label="None selected" max-height="300px">
                                                </div>
                                            </div>
                                        </fieldset>
                                        <div class="actions float">
                                            <button type="button" id="cancel" class="button blank edit-data-inline" ng-click="onCancelEdit($index)" translate>
                                                CANCEL
                                            </button>
                                            <button type="button" id="save" class="button green edit-data-inline" ng-click="updateSegment(segment)" translate>
                                                SAVE_CHANGES
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>
</section>
