<section class="content current" ng-click='clearErrorMessage()'>
	<div>
		<header class="content-title float">
			<h2> Rates </h2>
			<span class="count"> ({{data.length}}) </span>
			<a class="action add" ui-sref="admin.addRate">Add new</a>
			<a ng-show = "isConnectedToPMS" class="action import" ng-click="importFromPms()">IMPORT FROM PMS</a>
			<div class = "select">
				<select class = "table-filter" ng-model="filterType"
				    ng-options="opt.name for opt in filterList">
				    <option value="">Filter by Rate Type</option>
				</select>
			</div>
		</header>
		<div ng-include="'/assets/partials/common/notification_message.html'"></div>
		<span class="count-show">Show</span>
		<select class = "table-count" ng-model="displyCount"
			    ng-options="opt for opt in displayCountList">
		</select>
		<span class="count-entries">Entries</span>
		<div class = "table-search">
			<span>Search</span>
			<input type="text" ng-model="searchTerm" ng-enter = "searchEntered()"></input>
		</div>
		<div id="new-form-holder"></div>
		<!--ng-table component -->
		<table class="grid" ng-table="tableParams" template-pagination="custom/pager">
			<tbody>
				<tr ng-repeat="rate in $data" ng-class = "{'inactive': !rate.status}"> 
					<td data-title="'Name'" sortable="'rate'" >
						<strong>{{rate.name}}</strong>
					</td>

					<td data-title="'Based on'"  sortable="'based_on'">
						<span class= "tooltip-wrapper" ng-mouseenter="showRates($index, rate.based_on.id, 'based_on_rate_id', rate.based_on.name)" ng-mouseleave="mouseLeavePopover()">
							{{rate.based_on.name}}
							<div ng-show = "popoverRates.total_count > 0" class="tooltip">
								<div class="title">{{popoverRates.total_count}} Rate Based on {{popoverRates.results[0].based_on.name}}</div>
								<ul ng-include="getPopoverTemplate($index,rate.based_on.id)">
																		
								</ul>
							</div>
						</span>
					</td>
					<td data-title="'Type'" sortable="'rate_type'">
						<span class= "tooltip-wrapper" ng-mouseenter="showRates($index, rate.rate_type.id,'rate_type_id', rate.rate_type.name)" ng-mouseleave="mouseLeavePopover()">
							<strong>{{rate.rate_type.name}}</strong>
							<div ng-show = "popoverRates.total_count > 0" class="tooltip">
								<div class="title">{{popoverRates.total_count}} {{popoverRates.results[0].rate_type.name}}</div>
								<ul ng-include="getPopoverTemplate($index,rate.rate_type.id)">
								</ul>
							</div>
						</span>
					</td>
					<td data-title="'Date Ranges'">
						<span class= "tooltip-wrapper" ng-mouseenter="showDateRanges($index, rate.id,'rate_id', rate.date_range_count)" ng-mouseleave="mouseLeavePopover()">
						{{rate.date_range_count}}
						<div ng-show = "rate.date_range_count > 0" class="tooltip">
							<div class="title">{{rate.name}} - Rate date ranges</div>
								<ul ng-include="getdateRangeTemplate($index,rate.id)">
								</ul>
							</div>
						</span>
					</td>
					<td data-title="'Status'" sortable="'status'" ng-class = "{'green': rate.status}">
						{{rate.status ? 'ACTIVE' : 'INACTIVE'}}
					</td>
				</tr>
			</tbody>
		</table>
		<!--end -->

		<!--Custom pagination footer goes here-->
		<script type="text/ng-template" id="custom/pager">
			<div class = "pager">
				<span>Showing {{startCount}} to {{endCount}} of {{totalCount}} items</span>
				<ul class="ng-cloak">
	              	<li ng-repeat="page in pages"
		                ng-class="{'previous': page.type == 'prev', 'next': page.type == 'next'}"
		                ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
		                <a ng-switch-when="prev" ng-click="params.page(1)" class="page" ng-class="{'disabled': !page.active}">First</a>
		                <a ng-switch-when="prev" ng-click="params.page(page.number)" class="page" ng-class="{'disabled': !page.active}">Previous</a>
		                <a ng-switch-when="prev" ng-click="params.page(page.number)" class="page" ng-class="{'disabled': !page.active}">{{page.number}}</a>
		                <a ng-switch-when="next" ng-click="params.page(page.number)" class="page" ng-class="{'disabled': !page.active}">{{page.number}}</a>
		                <a ng-switch-when="next" ng-click="params.page(page.number)" class="page" ng-class="{'disabled': !page.active}">Next</a>
		                <a ng-switch-when="next" ng-click="params.page(totalPage)" class="page" ng-class="{'disabled': !page.active}">Last</a>
		          	</li>
	            </ul>
	        </div>
		</script>
		<!--end-->
	</div>
</section>

	<div id="new-form-holder" ng-show="isAddmode" ng-include="getAddRateTemplateUrl()">




