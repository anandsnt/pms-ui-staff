<section id="load-listing" class="content content-holder current admin-scrollfix" div-touch-move-stop-propogate style="opacity: 1;">
    <header class="content-title float">

        <h2><span>Create</span> Rate Sequence</h2>
        <a class="action back" ng-click="backToRateSequence()">Back</a>
        <div class="actions float pull-right">
            <button type="button" class="button add-data-inline toggle-tab white" ng-click="gotoManageSequence()">MANAGE Sequence</button>
            <button type="button" class="button add-data-inline toggle-tab orange">MANAGE Rates</button>
        </div>
    </header>
    <section class="content-scroll">
        <div id="permissions" class="tabs" data-tabs="details-tabs">
            <div class="entry has-sortable">
                <ul id="roles-menu" class="float" role="tablist" >
                    <!-- Add .ui-tabs-active when activa -->
                    <li ng-repeat="sequence in sequenceList track by $index" ng-click="selectSequence(sequence, $index)" ng-class="{'ui-tabs-active': selectedSequenceIndex == $index}">
                        <a>{{sequence.name}}</a>
                    </li>
                </ul>
            </div>
            <form class="form float" role="tabpanel">
                <fieldset id="assign-rate-sequence" class="holder full-width">
                    <div class="entry has-sortable">
                        <label class="status green">Rates in Sequence</label>
                        <!-- Add:
                            - .with-search - when showing search form
                            - .with-pagination - when showing pagination
                        -->
                        <div class="boxes with-sequence with-search">
                        
                            <div class="search-form">
                                <button id="rooms-clear-query" class="clear-query">
                                    <span class="icons icon-clear-search">Clear query</span>
                                </button>
                                <input name="rooms-query" id="rooms-query" class="query" placeholder="Search by Number or Range" autocomplete="off" type="text" ng-model="sequenceRateQuery" ng-change="sequenceRateSearch()">
                                <button type="button" name="button" class="icons icon-search">Search</button>
                            </div>
                        

                            <!-- Remove when we have at least one rate added -->
                            <div class="no-content" ng-if ='assignedRates.length == 0' ui-sortable="sortableRateSequenceOptions" ng-model="assignedRates">
                                <div class="info">
                                    Add rate to sequence by dropping it here.
                                </div>
                            </div>

                            <ul id="assigedrates" class="sortable" ui-sortable="sortableRateSequenceOptions" ng-model="assignedRates">
                                <li ng-repeat="assignedRate in assignedRates track by $index" ng-click="selectRate( assignedRate, $index )" ng-class="{selected: selectedAssignedRateIndex == $index}">
                                    <span class="icons icon-added"></span>{{assignedRate.name}}
                                </li>
                            </ul>
                            <!--
                            <div class="search-pagination">
                                <button type="button" class="button dark-grey next">Next</button>
                                <button type="button" class="button dark-grey prev disabled">Prev</button>
                                
                                <p><strong>{from}-{to}</strong> of <strong>{total}</strong> rates</p>
                            </div>
                            -->
                        </div>
                    </div>
                    <div class="entry movers">
                        <span class="icons icon-mover-left to-target" ng-click="selectedUnAssignedRateIndex == null || assignRate()" ng-class="{selected: selectedAssignedRateIndex == null}">Assign role(s)</span>
                        <span class="icons icon-mover-right to-source" ng-click="selectedAssignedRateIndex == null ||unAssignRate()" ng-disabled="selectedAssignedRateIndex == null" ng-class="{selected: selectedUnAssignedRateIndex == null}">Unassign role(s)</span>
                    </div>
                    <div class="entry has-sortable">
                        <label>Rates without Sequence</label>
                        <!-- Add:
                            - .with-search - when showing search form
                            - .with-pagination - when showing pagination
                        -->
                        <div class="boxes without-sequence with-search with-pagination">
                        
                            <div class="search-form">
                                <button id="rooms-clear-query" class="clear-query">
                                    <span class="icons icon-clear-search">Clear query</span>
                                </button>
                                <input name="rooms-query" id="rooms-query" class="query" placeholder="Search by Number or Range" autocomplete="off" type="text" ng-model="rateQuery" ng-change="rateSearch()">
                                <button type="button" name="button" class="icons icon-search">Search</button>
                            </div>
                        
                            <ul id="unassigedrates" class="sortable" ui-sortable="sortableRateOptions" ng-model="ratesList">

                                <li ng-repeat="rate in ratesList track by $index" ng-click="selectRate(rate, $index)" ng-class="{selected: selectedUnAssignedRateIndex == $index}">
                                    <span class="icons icon-handle"></span>{{rate.name}}</li>

                            </ul>
                            
                            <div class="search-pagination">
                                <button type="button" class="button dark-grey next" ng-disabled="paginationState.page == paginationState.maxPages" ng-class="{'disabled':paginationState.page == paginationState.maxPages}" ng-click="navigateFromPage(true)">Next</button>
                                <button type="button" class="button dark-grey prev" ng-disabled="paginationState.page == 1" ng-class="{'disabled':paginationState.page == 1 }" ng-click="navigateFromPage(false)">Prev</button>
                                
                                <p><strong>{{paginationState.firstIndex}}-{{paginationState.lastIndex}}</strong> of <strong>{{paginationState.totalRecords}}</strong> rates</p>
                            </div>
                            
                        </div>
                    </div>
                </fieldset> 
            </form>
        </div>
    </section>
</section>
