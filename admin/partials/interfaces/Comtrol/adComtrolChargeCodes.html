<section class="content current admin-scrollfix" div-touch-move-stop-propogate ng-click='clearErrorMessage()'>
    <div class="inline-edit">
        <header class="content-title float">
            <h2>Charge Code Mapping</h2>
            <span class="count">({{mappings.length - state.deletedCount}})</span>
            <a ng-click="goBackToPreviousState()" class="action back" translate>BACK</a>
            <button ng-click="onClickAdd()" class="action add" scrollup="replacing-div-first">Add new</button>
        </header>

        <section class="content-scroll">
            <div ng-include="'/assets/partials/common/notification_message.html'"></div>

            <div id="add-new" ng-show="state.mode === 'ADD'">
                <div class="data-holder">
                    <form class="form inline-form float">
                        <div class="form-title">
                            <h3><span></span> {{'ADD_CHARGE_CODE_MAPPING'| translate}} </h3>
                            <em class="status"> {{'MANDATORY_FIELDS_MESSAGE1' | translate}} <strong>*</strong>
                                {{'MANDATORY_FIELDS_MESSAGE2' | translate}} </em>
                        </div>
                        <fieldset class="holder left float">
                            <ad-dropdown-name label-in-drop-down="{{'REVENUE_CENTER_PLACEHOLDER' | translate}}"
                                              savemodel="state.new.revenue_center_code"
                                              valueproperty="code"
                                              label-properties="['code','name']"
                                              required="yes"
                                              list="state.revCenters"
                                              label="{{'REVENUE_CENTER' | translate}}"
                                              class="full-width">
                            </ad-dropdown-name>
                        </fieldset>
                        <fieldset class="holder left float">
                            <ad-textbox styleclass="full-width" value="state.new.category_name"
                                        label="{{'EXTERNAL_CODE' | translate}}"
                                        required="yes"
                                        placeholder="{{'EXTERNAL_CODE_PLACEHOLDER' | translate}}"></ad-textbox>
                        </fieldset>
                        <fieldset class="holder right float">
                            <ad-dropdown-name label-in-drop-down="{{'SELECT_CHARGE_CODE_PLACEHOLDER' | translate}}"
                                              savemodel="state.new.charge_code_name"
                                              valueproperty="name"
                                              label-properties="['name','description']"
                                              prefix-value="true"
                                              required="yes"
                                              list="state.chargeCodes"
                                              label="{{'CHARGE_CODE' | translate}}"
                                              class="full-width">
                            </ad-dropdown-name>
                        </fieldset>
                        <div class="actions float">
                            <button type="button" ng-click="onCancelAdd()" class="button blank edit-data-inline"
                                    translate>
                                CANCEL
                            </button>
                            <button type="button" ng-click="onSave()" class="button green edit-data-inline"
                                    ng-class="{'grey' : state.new.charge_code_id == '' || state.new.revenue_center_code == '' || state.new.category_name == ''}"
                                    ng-disabled="state.new.charge_code_id == '' || state.new.revenue_center_code == '' || state.new.category_name == ''"
                                    translate>
                                SAVE_CHANGES
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <table id="brands" class="grid datatable dataTable"
                   ng-show="mappings.length - state.deletedCount > 0"
                   ng-table="itemList" template-pagination="nil">
                <tbody>
                <tr ng-repeat="mapping in mappings track by $index" ng-hide="mapping.isDeleted">
                    <td data-item="1" data-title="'Revenue Center'" ng-click="onSelect($index, mapping)"
                        header-class="width-30" ng-hide="state.selected === $index">
                        <a class="edit-data-inline">{{mapping.revenue_center_code}}</a>
                    </td>
                    <td data-item="2" data-title="'External Code'" ng-click="onSelect($index, mapping)"
                        header-class="width-30" ng-hide="state.selected === $index">
                        <a class="edit-data-inline">{{mapping.category_name}}</a>
                    </td>

                    <td data-item="2" data-title="'Charge Code'" ng-click="onSelect($index, mapping)"
                        header-class="width-30" ng-hide="state.selected === $index">
                        <a class="edit-data-inline">{{mapping.charge_code_name}}</a>
                    </td>

                    <td header-class="width-10" data-title="'Delete'" class="delete"
                        ng-hide="state.selected === $index">
                        <a class="icons icon-delete large-icon" ng-click="onClickDelete(mapping)"></a>
                    </td>

                    <td colspan="4" ng-show="state.selected === $index">
                        <div style="display: block;" id="add-new" class="edit-data">
                            <div class="data-holder">
                                <!-- Edit Department -->
                                <form class="form inline-form float">
                                    <div class="form-title">
                                        <h3><span></span> {{'EDIT_CHARGE_CODE_MAPPING'| translate}} </h3>
                                        <em class="status"> {{'MANDATORY_FIELDS_MESSAGE1' | translate}} <strong>*</strong>
                                            {{'MANDATORY_FIELDS_MESSAGE2' | translate}} </em>
                                    </div>
                                    <fieldset class="holder left float">
                                        <ad-dropdown-name label-in-drop-down="{{'REVENUE_CENTER_PLACEHOLDER' | translate}}"
                                                          savemodel="mapping.revenue_center_code"
                                                          valueproperty="code"
                                                          label-properties="['code','name']"
                                                          required="yes"
                                                          list="state.revCenters"
                                                          label="{{'REVENUE_CENTER' | translate}}"
                                                          class="full-width">
                                        </ad-dropdown-name>
                                    </fieldset>
                                    <fieldset class="holder left float">
                                        <ad-textbox styleclass="full-width" value="mapping.category_name"
                                                    label="{{'EXTERNAL_CODE' | translate}}"
                                                    required="yes"
                                                    placeholder="{{'EXTERNAL_CODE_PLACEHOLDER' | translate}}"></ad-textbox>
                                    </fieldset>
                                    <fieldset class="holder right float">
                                        <ad-dropdown-name label-in-drop-down="{{'SELECT_CHARGE_CODE_PLACEHOLDER' | translate}}"
                                                          savemodel="mapping.charge_code_name"
                                                          valueproperty="name"
                                                          label-properties="['name','description']"
                                                          required="yes"
                                                          list="state.chargeCodes"
                                                          label="{{'CHARGE_CODE' | translate}}"
                                                          class="full-width">
                                        </ad-dropdown-name>
                                    </fieldset>
                                    <div class="actions float">
                                        <button type="button" ng-click="onCancelEdit()" class="button blank edit-data-inline"
                                                translate>
                                            CANCEL
                                        </button>
                                        <button type="button" ng-click="onUpdate(mapping)" class="button green edit-data-inline"
                                                ng-class="{'grey' : mapping.charge_code_id == '' || mapping.revenue_center_code == '' || mapping.category_name == ''}"
                                                ng-disabled="mapping.charge_code_id == '' || mapping.revenue_center_code == '' || mapping.category_name == ''"
                                                translate>
                                            SAVE_CHANGES
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>
    </div>
</section>