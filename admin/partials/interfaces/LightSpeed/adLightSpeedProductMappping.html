<div class="form-title full-width">
    <h3>{{'LS_PRODUCT_MAPPINGS' | translate}}</h3>
</div>
<div class="data-holder">
    <div class="entry has-sortable" ng-if="lightspeed.floors_enabled">
        <label>Restaurants</label>
        <div class="select">
            <select ng-model="data.selectedRestaurant"
                    ng-options="restaurant.name for restaurant in restaurants"
                    ng-change="fetchFloors()">
                    
            </select>
        </div>
    </div>
    <div class="entry has-sortable pull-right" ng-if="lightspeed.floors_enabled">
        <label>Floors</label>
        <div class="select">
            <select ng-model="data.selectedFloor"
                    ng-options="floor.name for floor in floors"
                    ng-change="fetchChargeCodeMapings()">
            </select>
        </div>
    </div>
    <div class="entry has-sortable">
        <label>Charge Codes</label>
        <div class="select">
            <select ng-model="data.selectedChargeCode" ng-change="filterMappedAndNonMappedProducts()">
               <option value="{{charge_code.value}}" ng-repeat="charge_code in chargeCodes">{{charge_code.charge_code}} - {{charge_code.description}}</option>
            </select>
        </div>
    </div>
    <div class="entry has-sortable pull-right">
        <label>&nbsp;</label>
        <input type="text" placeholder="Filter Products"  ng-model="data.filteredProduct" ng-change="filterNonMappedProducts()" />
    </div>
    <fieldset class="holder full-width">
        <div class="entry has-sortable">
            <label>Mapped Products</label>
            <ul id="mapped-products" data-placeholder="Place Here The Mapped Products"
                class="boxes sortable empty short-list" data-drop="true"
                jqyoui-droppable="{multiple:true}" ng-model="mappedProducts"
                data-jqyoui-options="{accept: '.non-mapped-products'}">
                <li ng-repeat="product in mappedProducts"
                    ng-model="mappedProducts" data-drag="true"
                    data-jqyoui-options="{revert: 'invalid',helper:'clone',appendTo: 'body'}"
                    jqyoui-draggable="{index: {{$index}}, placeholder:false, animate:false, onStart:'hideCurrentDragItem', onStop:'showCurrentDragItem'}"
                    class='mapped-products li-draggable'
                    style="border: 1px solid green">
                    <span class="icons icon-handle"> </span>{{product.name}} - {{product.sku}} - TAX ( {{product.taxClass}} )
                </li>
            </ul>
        </div>
        <div class="entry has-sortable pull-right">
            <label>Available Products To Be Mapped</label>
            <ul id="non-mapped-products" data-placeholder="Non Mapped Products"
                class="boxes sortable empty short-list" data-drop="true"
                jqyoui-droppable="{multiple:true}" ng-model="nonMappedProducts"
                data-jqyoui-options="{accept: '.mapped-products'}">
                <li ng-repeat="product in nonMappedProducts"
                    ng-model="nonMappedProducts" data-drag="true"
                    data-jqyoui-options="{revert: 'invalid',helper:'clone',appendTo: 'body'}"
                    jqyoui-draggable="{index: {{$index}}, placeholder:false, animate:false, onStart:'hideCurrentDragItem', onStop:'showCurrentDragItem'}"
                    class='non-mapped-products li-draggable'
                    style="border: 1px solid red">
                    <span class="icons icon-handle"> </span>{{product.name}} - {{product.sku}} - TAX ( {{product.taxClass}} )
                </li>
            </ul>
        </div>
    </fieldset>
    <div>
        <button class='button blue' ng-click="saveExternalMappings()">
            Save Mappings
        </button>
    </div>
</div>
