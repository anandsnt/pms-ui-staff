<div class="nested-view view-current">
	<!-- Nav bar -->

	<div ng-include="'/assets/partials/common/header.html'"></div>

	<section role="complementary" id="registration-details" class="content stay-card-inner check-in">
		<!-- Reservation Header -->
		<div class="reservation-header">
			<div class="actions back">
				<a id="back-to-staycard" class="back-button prev-view" >BACK</a>
			</div>
			<!-- Other header details -->
			<div class="data">
				<span data-room-status="NOTREADY" data-reserv-status="CHECKEDOUT" data-fostatus="VACANT" class="room"> <span class="guest-status room">room</span> <strong id="header-room-num" class="room-number"> 2019 </strong> <span id="room-type"> Deluxe Twin </span> </span>
				<span class="nights"> <span class="guest-status nights"></span> {{reservationBillData.number_of_nights}}
					nights </span>
				<span class="date"> <span class="guest-status small-icon check-in">check-in</span> 
				Tuesday	05-27-2014 </span>
				<span class="date"> <span class="guest-status small-icon check-out">check-out</span> 
				Saturday 05-31-2014 </span>
			</div>

		</div>
		<!-- Registration Content -->
		<div id="registration-content" ng-iscroll='registration-content' ng-iscroll-delay='50' class="registration-content">
			<div class="wrapper wrapperDisplay" style="height: {{calculatedHeight}}px;">
				<div id="notification-message" style="display: none;"></div>
				<div id="billing-information" class="billing-information notice" ng-show="routingArrayCount>0">
					<table>
						<thead>
							<tr>
								<th>To Bill #</th>
								<th>To Room #</th>
								<th>Guest / Company</th>
								<th>Details</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="routingData in reservationBillData.routing_array">
								<td> {{routingData.bill_number}} </td>
								<td>{{routingData.room_no}}</td>
								<td> {{routingData.guest_or_company}} </td>
								<td> {{routingData.details}} </td>
							</tr>
						</tbody>
					</table>
				</div>
				<div id="billing-information" class="billing-information notice" ng-show="incomingRoutingArrayCount>0">
					<table>
						<thead>
							<tr>
								<th>From Room #</th>
								<th></th>
								<th>From Guest Name</th>
								<th>Details</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="incomingRoutingData in reservationBillData.incoming_routing_array">
								<td> {{incomingRoutingData.room_no}} </td>
								<td></td>
								<td> {{incomingRoutingData.guest_name}} </td>
								<td> {{incomingRoutingData.details}} </td>
							</tr>
						</tbody>
					</table>
				</div>
				<!-- -data["incoming_routing_array"] = [{"room_no"=>"12345","guest_name"=>"krishobh","details"=>"qburst clt"},{"room_no"=>"12345","guest_name"=>"krishobh","details"=>"qburst clt"}] -->
				<!-- Rate & Bill Summary -->
				<div id="bills" class="registration-summary ui-tabs ui-widget ui-widget-content ui-corner-all">
					<!-- Bills summary tabs navigation -->
					<div id="bills-tabs-nav" class="float bill-tabs">
						<!-- Billing instructions -->
						<a class="toggle has-arrow" ng-show="routingArrayCount>0"> Billing information </a>
						<a class="toggle has-arrow" ng-show="incomingRoutingArrayCount>0"> Incoming Billing information </a>
						<!-- Add new bill -->
						<!-- %a.button.with-icon.only-icon.brand-colors -->
						<!-- %span.icons.icon-plus -->
						<!-- Add new -->
						<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
							<li class="ui-state-default ui-corner-top" ng-click="setActiveBill($index)" ng-class="showActiveBill($index)" ng-repeat="billTab in reservationBillData.bills">
								<a class="ui-tabs-anchor" >
								<div class="price" ng-hide="billTab.total_amount=='SR'">
									<span>Bill #{{billTab.bill_number}}</span>
									{{currencySymbol}}{{billTab.total_amount | number: precisonZero}}
								</div>
								<div class="price" ng-show="billTab.total_amount=='SR'">
									<span>Bill #{{billTab.bill_number}}</span>
									{{billTab.total_amount}}
								</div>
								<div class="payment" ng-show="billTab.credit_card_details.payment_type == 'DB' || billTab.credit_card_details.payment_type == 'CA' || billTab.credit_card_details.payment_type == 'CK'">
									{{billTab.credit_card_details.payment_type_description}}
								</div>
								<figure id="payment-info-1" class="card-logo" ng-show="billTab.credit_card_details.payment_type == 'CC'">
									<img src="/assets/{{billTab.credit_card_details.card_code}}.png" alt="">
									<span class="number"> {{billTab.credit_card_details.card_number}}</span>
								</figure></a>
							</li>

						</ul>
					</div>
					<!-- Bill Tabs for Day items and Group items -->
					<div ng-class="{'hidden': $index!=currentActiveBill}" class="bill-summary ui-tabs-panel ui-widget-content ui-corner-bottom" ng-repeat="billData in reservationBillData.bills">
						<div class="bill-summary-wrapper">
							<!-- TODO: IMPLEMENT HORIZONTAL SCROLL -->
							<div class="scrollable" >
								<ul class="wrapper">
									<li class="add-new">
										<a id="add-new-button" class="add-new-button">+ Add</a>
									</li>

									<li class="active" ng-click="showDayRates($index, days.date, reservationBillData.checkout_date)" ng-repeat="days in billData.days" ng-class="{'hidden': $parent.$index!='0', 'check-in':days.date == reservationBillData.checkin_date, 'check-out': days.date == reservationBillData.checkout_date, 'last': days.date == reservationBillData.checkout_date}">
										<!-- For checkin date -->
										<a class="toggle dual-toggle" ng-class="{'active': $index == dayRates}" ng-show="days.date != reservationBillData.checkout_date"> 
											<span class="day"> {{days.date | date:'EEE'}} </span> 
											<span class="date"> {{days.date | date:'dd'}} </span> 
											<span class="guest-status check-in small-icon" ng-show="days.date == reservationBillData.checkin_date">check-in</span> 
											<span class="price" ng-show="reservationBillData.is_rates_suppressed">{{reservationBillData.text_rates_suppressed}}</span>
											<span class="price" ng-hide="reservationBillData.is_rates_suppressed">{{currencySymbol}}{{days.amount | number: precisonZero}}</span> 
										</a>
										<!-- For checkout date -->
										<div class="no-expense" ng-show="days.date == reservationBillData.checkout_date">
											<span class="day"> {{days.date | date:'EEE'}} </span>
											<span class="date"> {{days.date | date:'dd'}} </span>
											<span class="guest-status check-out small-icon" >check-out</span>
										</div>
									</li>

									<!-- packages -->
									<li class="active package last" ng-click="showAddons($index)" ng-repeat="addons in billData.addons">
										<a class="toggle dual-toggle" ng-class="{'active': $index == showAddonIndex}"> 
											<span class="day"> {{addons.title}} </span> 
											<span class="price" ng-show="addons.package_type != 'PACKAGES'">{{addons.package_type}}</span> 
											<span class="price" ng-show="addons.package_type == 'PACKAGES'">{{currencySymbol}}{{addons.amount | number: precisonZero}}</span> 
										</a>
									</li>

									<!-- Group items tab -->
									<li class="active expense" ng-click="showGroupItems($index)" ng-repeat="groupItems in billData.group_items">
										<a class="toggle dual-toggle"  ng-class="{'active': $index == showGroupItemIndex}"> 
											<span class="expense"> {{groupItems.title}} </span> 
											<span class="price" >{{currencySymbol}}{{groupItems.amount | number: precisonZero}}</span>
										</a>
									</li>

								</ul>

							</div>
							<!-- Bill  summaries -->
							<!-- Bill item per day -Summary -->
							<div class="summary-expanded float" ng-class="{'hidden': $index != dayRates}" ng-repeat="billItem in billData.days">
								<a class="toggle has-arrow" ng-click="showRoomDetails($index)" ng-class="{'active': $index == showRoomDetailsIndex}">
									<div class="price" ng-show="billData.is_rates_suppressed">
										{{billData.text_rates_suppressed}}<span>+ fees</span>
									</div>
									<div class="price" ng-hide="billData.is_rates_suppressed">
										{{currencySymbol}}{{billItem.amount | number: precisonTwo}}<span>+ fees</span>
									</div>
									<div class="rate">
										<span> Rate per night </span>
										{{billItem.rate_name}}
									</div>
									<div class="room">
										<span> Guest Room Type </span>
										{{billItem.rate_name}}
									</div> 
								</a>
								<div class="stay-details float" ng-class="{'hidden': $index != showRoomDetailsIndex}">
									<div class="rate-details">
										{{billItem.rate_description}}
									</div>
									<div class="room-details">
										{{billItem.room_type_description}}
									</div>
								</div>
							</div>

							<!-- package summary -->
							<div class="summary-expanded float" ng-class="{'hidden': showAddonIndex != $index}" ng-repeat="billAddons in billData.addons">
								<table class="expense-details">
									<thead>
										<tr>
											<th class="price">Price</th>
											<th>Package</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="expense in billAddons.expense_details">
											<td class="price" ng-show="expense.is_inclusive"> INCL </td>
											<td class="price" ng-hide="expense.is_inclusive"> {{currencySymbol}}{{expense.price | number: precisonTwo}} </td>
											<td> {{expense.package}} </td>
										</tr>
									</tbody>
								</table>
							</div>
							<!-- Group items per day - Summary -->
							<div class="summary-expanded float" ng-class="{'hidden': showGroupItemIndex != $index}" ng-repeat="billGroupItems in billData.group_items">
								<table class="expense-details">
									<thead>
										<tr>
											<th>Expense</th>
											<th>Location</th>
											<th>Date</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="billGroupExpense in billGroupItems.expense_details">
											<td class="price" > {{currencySymbol}}{{billGroupExpense.expense | number: precisonTwo}} </td>
											<td> {{billGroupExpense.title}} </td>
											<td> {{billGroupExpense.date | date:'MM-dd-yyyy'}} </td>
										</tr>
									</tbody>
								</table>
							</div>

						</div>
						<!-- Show Total Stay Fees and Balance -->
						<div ng-include="'assets/partials/bill/rvTotalStayFees.html'"></div>

						<!-- Review bill and Complete checkout -->
						<!-- Checkin screen -->
						<!-- Checkout screen -->
					</div>
					<!-- Review bill and Complete checkout -->
					<!-- Checkin screen -->
					<!-- Checkout screen -->

				</div>
				<!-- Show Signature -->
				<!-- = render :partial => "staff/reservations/signature",:locals =>{:data =>data} -->
			</div>
		</div>

</div>

</section>
</div>