<div id="modal" class="modal-show" role="dialog" ng-cloak>
<form id="cancel-reservation" name="cancel-reservation" class="modal-content form cancel-reservation select-card"><!-- Add class "select-card" when applying penalty charge -->
    <button class="modal-close" id="modal-close" type="button" ng-click="closeDialog()"><span class="icons icon-close invert"></span></button>
    <fieldset id="cancel-options">
        <span class="h2 message"> DEPOSIT REQUIRED</span>
        <div id="set-payment" class="payment-form" ng-hide="successOccured">
            <div id="credit-card-options">
                <div class="entry">
                    <label for="booking-source">CARD INPUT</label>
                    <div class="switch-button" ng-class="{'on': !isManual}">
                        <input name="booking-source" value="booking-source" type="checkbox" ng-model="isManual" ng-change="cardInputChange()" />
                        <label class="data-off" > 
                            <span class="value" >C&P</span> 
                            <span class="switch-icon" >MANUAL</span>
                        </label>
                        <label class="data-on" > 
                            <span class="switch-icon" >C&P</span> 
                            <span class="value" >MANUAL</span> 
                        </label> 
                    </div>
                </div>
            </div>
        </div>
    </fieldset>    
    <!-- 1. deposit Options screen -->
    <fieldset id="cancel-options" ng-show="!paymentMode">
        <div id="set-payment" class="payment-form">
        <div id="selected-card" class="entry full-width" ng-click="onCardClick()" ng-show="cardSelected && isManual && !successOccured">
                <label>Credit Card (<span>Tap to change</span>)</label>
                <label id="pay-with-jcb" class="active-item item-payment">
                    <figure class="card-logo">
                      <img src="/assets/{{depositData.card_type}}.png" alt="" />
                    </figure>
                    <span class="number">Ending with <span class="value number">{{depositData.cardNumber}}</span></span>
                    <span class="date">Date <span class="value date">{{depositData.expiry_date}}</span></span>
                </label>
        </div>
        </div>
        <div class="notice deposit" ng-hide="depositInProcess">                        
            <p>Deposit required: <strong>9% of the stay / first night /(flat amount)</strong>.</p>
            <!-- Payment fields -->
            <div ng-include="'/assets/partials/reservation/rvPaymentFields.html'"></div>                        
            <!-- Buttons - remove class "hidden" when payment type is defined-->
            <div class="actions">
                <button type="button" class="button blue" ng-click="closeDialog()">Pay deposit later</button>
                <button type="button" class="button green" ng-click="payDeposit()">Pay deposit now</button>
            </div>
        </div>
        <div ng-hide="!depositInProcess">                        
            <div ng-include="'/assets/partials/common/notification_message.html'" ng-hide="successOccured"></div>
            <div ng-hide="errorOccured">
                <div ng-include="'/assets/partials/common/notification_success_message.html'"></div>
                Your authorized code is :{{authorizedCode}}
                Amount Paid: {{currencySymbol}}{{reservationData.depositAmount}}
            </div>
        </div>
        <div class="actions">
            <button type="button" class="button blank modal-close" ng-click="closeDialog()">Close</button>
            <!-- to chnage ng-lcick -->
            <button type="button" class="button blue" ng-click="showSuccess()" ng-show="depositInProcess && errorOccured && !successOccured">Try again</button>
        </div>
    </fieldset>

    <!-- 2. Apply deposit screen-->
    <fieldset id="apply-penalty" class="credit-card" ng-show="paymentMode">
        <div id="set-payment" class="payment-form">
            <div ng-include="'/assets/partials/roverPayment/rvCardOptions.html'"></div>
            </div>
        </div>
    </fieldset>
</form>

</div>