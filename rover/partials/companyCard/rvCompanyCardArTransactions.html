<!-- Company Card Tab - AR Transactions -->
<form method="post" action="{action}" id="cc-ar-transactions" name="cc-ar-transactions" class="form card-tab transactions">
    
    <div class="tab-header">
        <div class="search-form has-dates" ng-class="{'open':filterData.filterActive}"> <!-- Add class "open" when showing form -->
            <div class="entry filter">
                <button ng-click="clickedFilter()" type="button" class="filter button with-icon only-icon" ng-class="{'active':filterData.filterActive}"> <!-- Add class "active" when showing form -->
                    <span class="icons icon-filter" ng-class="{'active':filterData.filterActive}"></span> <!-- Add class "active" when showing form -->
                </button>
            </div>
            <div class="entry showing">
                <div class="select">
                    <select name="showing" id="showing" ng-model="filterData.showFilterFlag" ng-change="chagedShowFilter()">
                        <option ng-selected="filterData.showFilterFlag=='ALL'" value="ALL">Show All Bills</option>
                        <option ng-selected="filterData.showFilterFlag=='OPEN'" value="OPEN">Show Open Balance</option>
                    </select>
                </div>
            </div>
            <div class="entry search">
                <button class="clear-query">
                    <span class="icons icon-clear-search">Clear query</span>
                </button>
                <button type="submit" name="submit" class="icons icon-search">Search</button>
                <input name="ar-transaction-query" id="ar--query" class="query" placeholder="Search by Name, Room No. or Confirmation No." type="search" autocomplete="off" />
            </div>
            <div class="entry dates">
                <div class="entry-data has-datepicker">
                    <label for="ar-transaction-date-from">From</label>
                    <button class="clear-query"><span class="icons icon-clear-search">Clear query</span></button>
                    <input name="ar-transaction-date-from" id="ar-transaction-date-from" type="text" class="datepicker" value="" readonly />
                </div>
                <div class="entry-data has-datepicker">
                    <label for="ar-transaction-date-to">To</label>
                    <button class="clear-query"><span class="icons icon-clear-search">Clear query</span></button>
                    <input name="ar-transaction-date-to" id="ar-transaction-date-to" type="text" class="datepicker" value="" readonly />
                </div>
            </div>
        </div>
        <ul class="totals">
            <li>
                <div class="data">
                    <span class="label">Open guest bills</span>
                    <span class="value">{{arTransactionDetails.open_guest_bills}}</span>
                </div>
                <button type="button" class="button green">Pay All</button> <!-- Show only when open bills exsits -->
            </li>
            <li>
                <div class="data">
                    <span class="label">Amount received</span>
                    <span class="value green">{{currencySymbol}}{{arTransactionDetails.available_credit}}</span>
                    <!-- If $0:
                    <span class="value red">${value}</span> -->
                </div>
                <button type="button" class="button purple with-icon only-icon">
                    <span class="icons icon-pencil"></span>
                </button>
            </li>
            <li>
                <div class="data">
                    <span class="label">Amount owed</span>
                    <span class="value red">{{currencySymbol}}{{arTransactionDetails.amount_owing}}</span>
                    <!-- If $0:
                    <span class="value green">${value}</span> -->
                </div>
            </li>
            <li>
                <button type="button" class="button white purple-text">Past Payments</button>
                <button type="button" class="button blue with-icon only-icon">
                    <span class="icons icon-print"></span>
                </button>
            </li>
        </ul>
    </div>

    <!-- If there are open bills: -->
    <div class="tab-details scrollable" ng-if="arTransactionDetails.open_guest_bills > 0">
        <div class="wrapper">

            <ul class="search-results">
                <li class="reservation transaction">
                    <!-- Not using <a> here since 1) you don't use hrefs at all and 2) it'll interfere with the checkbox -->
                    <div class="faux-anchor" class="guest-{reservation-status}"> <!-- see options in {dashboard/front-desk.html} -->
                        <figure class="guest-image"><!-- add class "accompany" if it's a accompanying guest -->
                            <img src="{primary-guest-image}" alt="" />
                            <!-- if it's accompanying guest, show this as well:
                            <img src="{accompanying-guest-image-or-avatar}" alt="" />-->
                            <!-- if VIP guest:
                            <span class="vip">VIP</span> -->
                        </figure>
                        <div class="data">
                            <h2><span>{Lastname}</span>, <span>{Firstname}</span></h2>
                            <span class="confirmation">2680117</span>
                            <div class="arrival">
                                <span class="guest-status small-icon check-in">check-in</span>
                                {arrival date}
                            </div>
                            <div class="departure">
                                <span class="guest-status small-icon check-out">check-out</span>
                                {departure date}
                            </div>
                        </div>
                        <div class="amount">${bill cost}</div>
                        <div class="switch-button"> <!-- add class "on" when checkbox checked -->
                            <input value="" type="checkbox" />
                            <label class="data-off">
                                <span class="value">Open</span>
                                <span class="switch-icon">Paid</span>
                            </label>
                            <label class="data-on">
                                <span class="switch-icon">Open</span>
                                <span class="value">Paid</span>
                            </label>
                        </div>
                    </div>
                </li>
                ... repeat
            </ul>

         </div>
    </div>

    <!-- When no open bills / all bills paid -->
    <div class="tab-details no-content" ng-if="arTransactionDetails.open_guest_bills == 0">
        <div class="info">
            <span class="icon-no-content icon-ok"></span>
            <strong class="h1">No Transactions</strong>
            <span class="h2">Outstanding Guest Bills paid</span>
        </div>
    </div>
</form>