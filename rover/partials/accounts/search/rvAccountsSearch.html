<!-- Search form -->
<form method="get" action="" name="groups-search-form" id="groups-search-form" class="search-form has-dates" role="search" >

    <a ui-sref="rover.accounts.config({id:'NEW_ACCOUNT',activeTab:'ACCOUNTS'})">NEW_ACCOUNT</a>
    <div class="entry search">        
        <button id="groups-clear-query" 
                class="clear-query"
                ng-click="clearSearchQuery()" 
                ng-class="{'visible': !isEmpty(query)}">
            <span class="icons icon-clear-search" translate>CLEAR_QUERY</span>
        </button>

        <button type="submit" name="submit" class="icons icon-search" translate>SEARCH</button>
        
        <input  name="groups-query" 
                id="groups-query" 
                class="query" 

                placeholder="Account Code or Account Name" 
                type="search"  

                autocomplete="off" 
                ng-model="query"  

                rv-delay-textbox
                delay="1000" 
                function-to-fire="searchQueryChanged"/>
    </div>



   <div class="entry options">
        <div class="select">
            <select id="work-type" name="work-type" ng-model="topFilter" ng-options="work.id as work.name for work in workTypes" ng-change="applyWorkTypefilter()" class="ng-pristine ng-valid"><option value="" class="">All Work Types</option><option value="0">Daily Cleaning</option><option value="1">Daily Cleaning</option></select>
        </div>
   </div>
</form>
<!-- Pagination -->
<div class="search-pagination" ng-show="shouldShowPagination()">
    <button type="button" class="button dark-grey next" ng-click="loadNextSet()" ng-disabled="isNextButtonDisabled()">Next</button>
    <button type="button" class="button dark-grey prev" ng-click="loadPrevSet()" ng-disabled="isPrevButtonDisabled()">Previous</button>
    <p>Showing <strong>{{start}}-{{end}}</strong> of <strong id="total-count">{{totalResultCount}}</strong> items</p>
</div>

<!-- Search panel - WITH RESULTS -->
<section id="find-group" class="content scrollable" role="main" 
    ng-class="{'no-pagination': !shouldShowPagination(), 'no-results': shouldShowNoResult()}"
    ng-iscroll="result_showing_area" ng-iscroll-delay="1000" > <!-- If no pagination, add class "no-pagination" -->
    <div class="wrapper">
        <div ng-include="'/assets/partials/common/notification_message.html'"></div>
        <ul class="search-results">
            <!-- If no results, show this: -->
            <li class="no-content" ng-show="isFirstTimeWithNoResult()">
                <div class="info">
                    <span class="icon-no-content icon-groups"></span>
                    <strong class="h1">Find Accounts</strong>
                    <span class="h2">                
                            Search by
                            <strong>Account Code</strong> or
                            <strong>Account Name</strong>
                        </span>
                </div>
            </li>

            <!-- If no results, show this: -->
            <li class="no-content" ng-show="shouldShowNoResult()">
                <div class="info">
                    <span class="icon-no-content icon-groups"></span>
                    <strong class="h1">No Matches</strong>
                    <span class="h2">Check that you didn't mispell the <strong>Account Name</strong> or <strong>Code</strong>.</span>
                </div>
            </li>
            <li class="group" ng-show="!shouldShowNoResult()" ng-repeat="account in accountList" ngrepeatend ngrepeatstarted>
                <a ng-click="gotoEditAccount(account.id)">
                    <div class="data">
                        <h2 ng-bind-html="{{escapeNull(stringify(account.account_name))}}|highlight:query:false">
                        </h2>
                        <span class="confirmation" ng-bind-html="{{escapeNull(stringify(account.account_code))}}|highlight:query:false"></span>

                    </div>
                    <div class="blocked" ng-class="getClassAgainstBalance(account)"> <!-- If Status = Tentative, add class "tentative" -->
                        <strong>{{account.balance}}</strong>
                        <span>BALANCE</span>
                    </div>

                    <div class="picked" ng-class="getClassAgainstAccountStatus(account)"> <!-- Add class "green" if No. > 0, or class "red" if cancelled -->
                        <strong>{{account.status}}</strong>
                         <span>STATUS</span>
                    </div>
                   
                </a>
            </li>
        </ul>
    </div>
</section>