<span class="nested-view view-current" ng-class="{ 'return-back': !showReportDetails }">
    <div ng-include="'/assets/partials/common/header.html'"></div>
    
    <span ng-controller="RVReportListCrl" class="content reports-wrapper" ng-hide="showReportDetails">
        
        <!-- Search -->
        <form class="search-form">
            <div class="entry search">
                <button type="button" class="clear-query" ng-class="{'visible': query.length}" ng-click="clearQuery()"> <!-- Add class "visible" to show -->
                    <span class="icons icon-clear-search">Clear query</span>
                </button>
                <button type="button" name="submit" class="icons icon-search">Search</button>
                <input id="reports-query" class="query" placeholder="Search by Report Name" type="search" autocomplete="off" ng-model="query" ng-keyup="filterByQuery()">
            </div>
        </form>

        <section id="reports" role="main" style="position: relative; height: 100%;">
            
            <!-- Menu -->
            <div id="reports-menu">
                <ul id="report-main-menu">
                    <li class="active"> <!-- Selected by default -->
                        <i class="icon-report icon-all-reports"></i>
                        <span class="title has-arrow next-view">View All Reports</span>
                    </li>
                    <li> <!-- Add class "active" when selected -->
                        <i class="icon-report icon-schedule"></i>
                        <span class="title has-arrow next-view">Scheduled Reports</span>
                    </li>
                     <li> <!-- Add class "active" when selected -->
                        <i class="icon-report icon-category"></i>
                        <span class="title has-arrow next-view">Add a Category</span>
                    </li>
                     <li> <!-- Add class "active" when selected -->
                        <i class="icon-report icon-category"></i>
                        <span class="title has-arrow next-view">My Reports</span>
                    </li>
                </ul>
                <!-- Output only if user has custom created report grups -->
                <div id="report-user-menu" class="scrollable" ng-if="customCreatedReports">
                    <ul class="wrapper">
                         <li> <!-- Add class "active" when selected -->
                            <i class="icon-report icon-user"></i>
                            <span class="title">{Name}</span>
                        </li>
                        ... repeat for each
                    </ul>
                </div>
            </div>

            <!-- Content -->
            <!-- ng-iscroll="report-dashboard-scroll" -->
            <div id="reports-dashboard"
                class="scrollable cols-2"
                ng-if="reportList.length"
                ng-controller="RVReportListCrl"
                ng-class="{'cols-2': !! uiChosenReport }">
                <div class="wrapper">
                    <div class="cols-wrapper">
                        <div class="report-col main-col scrollable"
                            ng-iscroll="report-list-scroll"
                            ng-iscroll-delay="200">
                            <ul class="wrapper">
                                <li class="report-item"
                                    ng-repeat="item in reportList"
                                    ng-class="{'active': item.uiChosen}"
                                    ng-hide="item.filteredOut"
                                    ng-click="toggleFilter($event, item)"
                                    emit-when="{event: 'REPORT_LIST_RENDERED', condition: $last}">
                                    <span ng-class="item.reportIconCls"></span>
                                    <div class="data">
                                        <h2 ng-bind-html="escapeNull(item.title)|highlight:query:false"></h2>
                                        <em>{{ item.description }}</em>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <!-- Second column - filters -->
                        <div class="report-col">
                            <div class="scrollable"
                                ng-iscroll="report-filters-scroll"
                                ng-iscroll-delay="200">
                                <div class="wrapper">
                                    <h3>{{ uiChosenReport.title }}<span>Configure report</span></h3>
                                    <div class="configure-report" ng-include="'/assets/partials/reports/filters/rvReportListFilters.html'"></div>
                                </div>
                                <div class="column-actions" ng-class="{'two-buttons': uiChosenReport.display_export_button && !hideExportOption}">
                                    <button type="button" class="button purple"
                                        ng-click="exportCSV(uiChosenReport)"
                                        ng-if="uiChosenReport.display_export_button && !hideExportOption">Export</button>
                                    <button type="button" class="button green"
                                        ng-click="setnGenReport(uiChosenReport)"
                                        ng-show="uiChosenReport.display_show_button">Show</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="no-content" ng-if="! reportList.length">
                <div class="info">
                    <span class="icon-no-content icon-reports"></span>
                    <strong class="h1">Reports unavailable</strong>
                    <span class="h2">You have no report options configured</span>
                </div>
            </div>
            
        </section>
    </span>
    
    <span ng-controller="RVReportDetailsCtrl" class="content reports-wrapper" ng-show="showReportDetails">
        <section id="report-details" role="main" ng-click="toggleSidebar()"  style="position: relative; height: 100%;">
            <div id="report-update" class="sidebar-left ui-resizable" ng-class="{'open': showSidebar}" ng-click="toggleSidebar($event)" ng-include="'/assets/partials/reports/filters/rvReportDetailsFilters.html'"></div>

            <div class="report-header" ng-show="showReportHeader">
                <div ng-show="hasReportTotals && !hasNoResults" ng-include="'/assets/partials/reports/shared/summaryCounts.html'"></div>

                <div class="actions">
                    <div class="select" ng-if="HIDE_THIS_FEATURE">
                        <select name="" id="">
                            <option value="pdf">Save/E-mail as PDF</option>
                            <option value="word">Save/E-mail as Word</option>
                            <option value="excel">Save/E-mail as Excel</option>
                        </select>
                    </div>
                    <button class="button with-icon only-icon blue" button="button" ng-click="emailReport()" ng-if="HIDE_THIS_FEATURE"><span class="icons icon-email"></span>
                    </button>
                    <button class="button with-icon only-icon blue" button="button" ng-click="fetchFullReport()"><span class="icons icon-print"></span>
                    </button>
                    <button ng-click="exportCSV()" class="button with-icon only-icon purple" button="button" ng-show="shouldShowExportButton(chosenReport) && !hideExportOption"><span class="icons icon-save"></span>
                    </button>
                    
                    <button class="button with-icon only-icon purple" button="button" ng-click="saveFullReport()" ng-if="HIDE_THIS_FEATURE"><span class="icons icon-save"></span>
                    </button>
                </div>
            </div>

            <div class="report-header" ng-show="errorMessage.length" ng-include="'/assets/partials/common/notification_message.html'"></div>

            <span ng-hide="errorMessage.length" ng-include="detailsTemplateUrl"></span>
        </section>
    </span>
</span>
