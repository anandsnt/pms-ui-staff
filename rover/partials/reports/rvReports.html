<div class="nested-view view-current" ng-class="{ 'return-back': !showReportDetails }">
    <div ng-include="'/assets/partials/common/header.html'"></div>

    <!-- the listing page where all the available reports are listed -->
    <section id="reports" class="content scrollable reports-wrapper" role="main" ng-hide="showReportDetails" ng-controller="RVReportListCrl" ng-iscroll="report-list-scroll">
        <div class="wrapper">
            <ul class="reports-list">
                <li ng-repeat="item in reportList" emit-when="{event: 'REPORT_LIST_RENDERED', condition: $last}">
                    <a href="#" class="toggle-filter has-arrow" ng-class="{'active': item.show_filter}" ng-click="toggleFilter($event, item)">
                        <span ng-class="item.reportIconCls"></span>
                        <div class="data">
                            <h2 ng-class="{'single-title': !item.description}">
                                {{ item.title }}
                                <span ng-if="item.sub_title">{{ item.sub_title }}</span>
                            </h2>
                            <em>{{ item.description }}</em>
                        </div>
                    </a>
                    <div class="configure-report" ng-class="{'two-buttons': item.display_export_button && !hideExportOption}" ng-show="item.show_filter" ng-include="'/assets/partials/reports/filters/rvReportListFilters.html'"></div>
                </li>
            </ul>
        </div>
    </section>



    <!-- the details of the chosen report are shown here -->
    <section id="report-details" class="content reports-wrapper" role="main" ng-show="showReportDetails" ng-click="toggleSidebar()">
        <span ng-controller="RVReportDetailsCtrl">
            <div id="report-update" class="sidebar-left ui-resizable" ng-class="{'open': showSidebar}" ng-click="toggleSidebar($event)" ng-include="'/assets/partials/reports/filters/rvReportDetailsFilters.html'"></div>

            <div class="report-header" ng-show="showReportHeader">
                <div ng-show="hasReportTotals && !hasNoResults" ng-include="'/assets/partials/reports/shared/summaryCounts.html'"></div>

                <div class="actions">
                    <div class="select" ng-if="HIDE_THIS_FEATURE">
                        <select name="" id="">
                            <option value="pdf">Save/E-mail as PDF</option>
                            <option value="word">Save/E-mail as Word</option>
                            <option value="excel">Save/E-mail as Excel</option>
                        </select>
                    </div>
                    <button class="button with-icon only-icon blue" button="button" ng-click="emailReport()" ng-if="HIDE_THIS_FEATURE"><span class="icons icon-email"></span>
                    </button>
                    <button class="button with-icon only-icon blue" button="button" ng-click="fetchFullReport()"><span class="icons icon-print"></span>
                    </button>
                    <button ng-click="exportCSV()" class="button with-icon only-icon purple" button="button" ng-show="shouldShowExportButton(chosenReport) && !hideExportOption"><span class="icons icon-save"></span>
                    </button>
                    
                    <button class="button with-icon only-icon purple" button="button" ng-click="saveFullReport()" ng-if="HIDE_THIS_FEATURE"><span class="icons icon-save"></span>
                    </button>
                </div>
            </div>

            <div class="report-header" ng-show="errorMessage.length" ng-include="'/assets/partials/common/notification_message.html'"></div>

            <span ng-hide="errorMessage.length" ng-include="detailsTemplateUrl"></span>
        </span>
    </section>
</div>
