<div id="modal" ng-class="{'modal-show': !modalClosing}" role="dialog" ng-cloak>
    <!-- Add classes:
        - with-restriction-list - To show the left hand side restriction list icons
        - restriction-view - When editing or setting a restriction
        - showing-dates - When showing Dates (right content)
    -->
    <div class="rate-manager-modal rate-manager-hierarchy modal-content" ng-class="{'restriction-view': popUpView === 'NEW' || popUpView === 'EDIT'}">
        <button class="modal-close dark-title" id="modal-close" type="button"><span class="icons icon-close" ng-click="closeDialog()"></span></button>
            
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-header-left">
                    <h2 class="h1">
                        {{header.date}}
                    </h2>
                    <!-- Add .yellow when showing House Restrictions-->
                    <em ng-class="{'yellow': header.hierarchyType === 'House'}">{{header.hierarchyType}} restrictions</em>
                </div>
                <div class="modal-header-right">
                    <button type="button" class="button green" ng-class="{'hidden': popUpView === 'NEW' || popUpView === 'EDIT', 'grey disable-element': header.disableNewRestriction, 'green': !header.disableNewRestriction}" ng-click="initiateNewRestrictionForm()">Add Restriction</button>
                </div>
            </div>                
            <div class="modal-body">
                <!-- selection list on the left for edit screen -->
                <div class="restrictions-list" ng-class="{'hidden': popUpView !== 'EDIT'}">
                    <div class="scrollable">
                        <div class="wrapper">
                            <ul>
                                <!-- if active add .active -->
                                <li ng-repeat="restriction in restrictionStylePack" ng-class="{'active': restriction.value}">
                                    <!-- 'restriction-value' => number of days if a restriction has any, if not it is empty -->
                                    <div class="{{'restriction-icon ' + restriction.bgClass + ' ' + restriction.iconClass}}">
                                        {{restriction.value}}
                                    </div>
                                </li>
                                <!-- ... repeat for each restriction -->

                                <li>
                                    <button type="button" class="add-new-button">+</button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="restriction-content">
                    <div class="content-middle">
                        <span ng-if="popUpView === 'EMPTY'"
                        rv-include-template="/assets/partials/rateManager_/popup/hierarchyRestriction/rvRateManagerHierarchyRestrictionsEmpty.html">
                        </span>
                        <span ng-if="popUpView === 'LIST'"
                        rv-include-template="/assets/partials/rateManager_/popup/hierarchyRestriction/rvRateManagerHierarchyRestrictionsTable.html">
                        </span>
                        <span ng-if="popUpView === 'NEW' || popUpView === 'EDIT'"
                        rv-include-template="/assets/partials/rateManager_/popup/hierarchyRestriction/rvRateManagerHierarchyRestrictionForm.html">
                        </span>
                    </div>
                    <!-- hiding as this will be implemented in another story -->
                    <div class="content-right hidden">
                        <div class="scrollable">
                            <div class="wrapper">
                                <h2>Repeat on Dates</h2>
                                <div class="notice">
                                    Overrides All <strong>min. length of stay</strong> set on these rate types and dates
                                </div>

                                <h4>For every</h4>
                                <div class="list_week_days">
                                    <!-- Add class .checked when checked-->
                                    <label class="checkbox" for="{day-id}">
                                        <!-- Add class .checked when checked-->
                                        <span class="icon-form icon-checkbox"></span>
                                        <!-- add attribute 'checked="checked"' when checked-->
                                        <input name="{day-name}" id="{day-id}" value="restrictions" type="checkbox"/>
                                        {SHORT DAY | Mon, Tue, Wed ...}
                                    </label>
                                    <!-- ... repeat for each day in the week -->
                                    
                                    <!-- 'ButtonText':
                                        - 'Select All' - when some day is not selected, 'text-class': brand-text
                                        - 'Clear All' - when all days are selected, 'text-class': red-text
                                    -->
                                    <button class="button white {text-class}">
                                        {ButtonText}
                                    </button>
                                </div>

                                <h4>Until</h4>
                                <div class="has-datepicker">
                                    <input id="rmDateRange" placeholder="Select Date Range" readonly="" maxlength="8" class="hasDatepicker" name="">
                                    <button type="button" class="ui-datepicker-trigger">...</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="footer">
                        <!-- Add .with-remove-button when we also have the remove button (example: on edit screens)-->
                        <div class="actions" ng-class="{'with-remove-button': popUpView === 'EDIT'}">

                            <!-- On initial screen -->
                            <button class="button blank" type="button" ng-click="closeDialog()" ng-class="{'hidden': popUpView === 'NEW' || popUpView === 'EDIT'}">
                                Close window
                            </button>
                            <!-- On set restriction screen without dates -- -->
                            <button class="button blank" ng-class="{'hidden': (popUpView !== 'NEW' && popUpView !== 'EDIT')}" type="button" ng-click="backToInitialScreen()">
                                Cancel
                            </button>
                            <!-- -- remove .grey and add .green if we can set the restriction -- -->
                            <button class="button" ng-class="{'hidden': (popUpView !== 'NEW' && popUpView !== 'EDIT'), 'grey disable-element': !validateForm(), 'green': validateForm()}" type="button" ng-click="setHouseHierarchyRestriction()">
                                Set
                            </button>
                        

                            <!-- On set restriction screen with dates --
                                <button class="button blank" type="button">
                                    Cancel
                                </button>
                                -- remove .grey and add .green if we can set the restriction --
                                <button class="button grey" type="button">
                                    Set on Date(s)
                                </button>
                            -->

                            <!-- On edit restriction screen without dates (.with-remove-buttons on .actions) --
                                <button class="button small red first-button" type="button">
                                    Remove
                                </button>
                                <button class="button blank" type="button">
                                    Cancel
                                </button>
                            
                                <button class="button small green last-button" type="button">
                                Update
                                </button>
                            -->

                            <!-- On edit restriction screen with dates (.with-remove-buttons on .actions) --
                                <button class="button red first-button" type="button">
                                    Remove on Date(s)
                                </button>
                                <button class="button blank" type="button">
                                    Cancel
                                </button>
                            
                                <button class="button green last-button" type="button">
                                Set on Date(s)
                                </button>
                            -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>