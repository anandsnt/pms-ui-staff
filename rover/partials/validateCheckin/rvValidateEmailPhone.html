<div role="dialog" id="modal" class="modal-show" ng-class="{'modal-show': !modalClosing}">
	<div class="modal-content form check-in-data">
	    <button class="modal-close" id="modal-close" type="button" ng-click="closeDialog()"><span class="icons icon-close invert"></span></button>
	    
	    <span class="h2 message">Provide data before check in</span>
	    <span class="text">Fields marked with <strong class="required">*</strong> are mandatory</span>  
	    <div class="modal-fields scrollable" ng-iscroll="guestCardFields">
		    <div class="wrapper">
			    <!-- if no guest info required, don't show it -->
			    <fieldset ng-if="shouldShowGuestInfoInValidationPopup">
			        <legend>Guest Info</legend>
			        <div class="fields">
			            <div class="entry" ng-if="showNationality">
			                <label>Nationality <strong class="required">*</strong></label>
			                <div class="select">
			                    <select iscroll-stop-propagation ng-options="country.id as country.value for country in countries" ng-model="guestCardData.contactInfo.nationality_id" class="placeholder">
									<option value="">Select Nationality</option>
								</select>
			                </div>
			            </div>
			            <div class="entry" ng-if="showCountry && roverObj.forceCountryAtCheckin">
			                <label>Country <strong class="required">*</strong></label>
			                <div class="select">
			                    <select iscroll-stop-propagation ng-options="country.id as country.value for country in countries" ng-model="guestCardData.contactInfo.address.country_id" class="placeholder">
									<option value="">Select Country</option>
								</select>
			                </div>
			            </div>
			            <div class="entry"  ng-if="showMobile">
			                <label>Mobile</label>
			                <input type="tel" placeholder="Enter Number" ng-model="saveData.mobile">
			            </div>
			            <div class="entry" ng-if="showPhone">
			                <label>Phone</label>
			                <input type="tel" placeholder="Enter Number" ng-model="saveData.phone">
			            </div>
			            <div class="entry" ng-if="showEmail">
			                <label>E-mail</label>
			                <input type="email" placeholder="Enter E-mail Address" ng-model="saveData.email">
			            </div>
						<div class="entry" ng-if="showJobTitle && (guestCardData.contactInfo.job_title === '' || guestCardData.contactInfo.job_title === null)">
							<label>Job Title<strong>*</strong></label>
							<input type="text" placeholder="Enter Job Title" ng-model="saveData.job_title">
						</div>
						<div class="entry" ng-if="showNameOfFather && (guestCardData.contactInfo.father_name === '' || guestCardData.contactInfo.father_name === null)">
							<label>Name of Father<strong>*</strong></label>
							<input type="text" placeholder="Enter Name of Father" ng-model="saveData.father_name">
						</div>
						<div class="entry" ng-if="showNameOfMother && (guestCardData.contactInfo.mother_name === '' || guestCardData.contactInfo.mother_name === null)">
							<label>Name of Mother<strong>*</strong></label>
							<input type="text" placeholder="Enter Name of Mother" ng-model="saveData.mother_name">
						</div>
						<div class="entry" ng-if="showPlaceOfBirth && (guestCardData.contactInfo.birth_place === '' || guestCardData.contactInfo.birth_place === null)">
							<label>Place of Birth<strong>*</strong></label>
							<input type="text" placeholder="Enter Place of Birth" ng-model="saveData.birth_place">
						</div>
						<div class="entry" ng-if="showGender && (guestCardData.contactInfo.gender === '' || guestCardData.contactInfo.gender === null)">
							<label>Gender<strong>*</strong></label>
							<input type="text" placeholder="Enter Gender" ng-model="saveData.gender">
						</div>
						<div class="entry" ng-if="showVehicleRegistrationNumber && (guestCardData.contactInfo.vehicle_registration_number === '' || guestCardData.contactInfo.vehicle_registration_number === null)">
							<label>Vehicle Registration Number<strong>*</strong></label>
							<input type="text" placeholder="Enter Vehicle Registration Number" ng-model="saveData.vehicle_registration_number">
						</div>
						<div class="entry" ng-if="showPersonalIdNumber && (guestCardData.contactInfo.personal_id_no === '' || guestCardData.contactInfo.personal_id_no === null)">
							<label>Personal Id Number<strong>*</strong></label>
							<input type="text" placeholder="Enter Personal Id No" ng-model="saveData.personal_id_no">
						</div>
						<div class="entry" ng-if="showHomeTown && (guestCardData.contactInfo.home_town === '' || guestCardData.contactInfo.home_town === null)">
							<label>Home Town<strong>*</strong></label>
							<input type="text" placeholder="Enter Home Town" ng-model="saveData.home_town">
						</div>
						<div class="entry" ng-if="showPlaceOfResidence && (guestCardData.contactInfo.place_of_residence === '' || guestCardData.contactInfo.place_of_residence === null)">
							<label>Place Of Residence<strong>*</strong></label>
							<input type="text" placeholder="Enter Place of Residence" ng-model="saveData.place_of_residence">
						</div>
						<div class="entry" ng-if="showVehicleCountryMark">
							<label>Vehicle Country Mark<strong>*</strong></label>
							<div class="select">
								<select iscroll-stop-propagation ng-options="country.code as country.code for country  in countries" ng-model="saveData.country_code" class="placeholder">
									<option style="display:none" value="">Select vehicle country mark</option>
								</select>
							</div>
						</div>
						<div class="entry" ng-if="showDateOfBirth">
							<label>Date Of Birth<strong>*</strong></label>
							<input type="text" ng-model="saveData.birth_day" name="guest-birthday" maxlength="8" id="guest-birthday" class="datepicker" ng-click="popupCalendar()" readonly />
						</div>
			        </div>
			    </fieldset>
			     <fieldset ng-if="shouldShowDemographicsInValidationPopup">
				        <legend>Demographics</legend>
					        <div class="fields">
					            <div class="entry margin" ng-if="shouldShowReservationType">
				            <label for="reservation-type">Reservation type<strong ng-show="otherData.reservationTypeIsForced">*</strong>
				            </label>
				            <div class="select">
				                <select convert-to-number iscroll-stop-propagation name="reservation-type" id="reservation-type" ng-class="{'placeholder': reservationParentData.demographics.reservationType == ''}" ng-model="reservationParentData.demographics.reservationType">
				                    <option value="" translate>RESERVATION_TYPE_PLACEHOLDER</option>
				                    <option ng-repeat="reservationType in otherData.reservationTypes" value="{{reservationType.value}}" ng-selected="reservationType.value == reservationParentData.demographics.reservationType">{{reservationType.name}}</option>
				                </select>
				            </div>
				        </div>
				        <div class="entry margin" ng-if="shouldShowMarket">
				            <label for="market">Market<strong ng-show="otherData.marketIsForced">*</strong>
				            </label>
				            <div class="select">
				                <select convert-to-number iscroll-stop-propagation name="market" id="market" ng-class="{'placeholder': reservationParentData.demographics.market == ''}" ng-model="reservationParentData.demographics.market">
				                    <option value="" translate>MARKET_PLACEHOLDER</option>
				                    <option ng-repeat="market in otherData.markets" value="{{market.value}}" ng-selected="market.value==reservationParentData.demographics.market">{{market.name}}</option>
				                </select>
				            </div>
				        </div>
				        <div class="entry margin" ng-if="shouldShowSource">
				            <label for="source">Source<strong ng-show="otherData.sourceIsForced">*</strong>
				            </label>
				            <div class="select">
				                <select convert-to-number iscroll-stop-propagation name="source" id="source" ng-class="{'placeholder': reservationParentData.demographics.source == ''}" ng-model="reservationParentData.demographics.source">
				                    <option value="" translate>SOURCE_PLACEHOLDER</option>
				                    <option ng-repeat="source in otherData.sources" value="{{source.value}}" ng-selected="source.value==reservationParentData.demographics.source">{{source.name}}</option>
				                </select>
				            </div>
				        </div>
				        <div class="entry margin" ng-if="shouldShowOriginOfBooking">
				            <label for="origin">Origin of Booking<strong ng-show="otherData.originIsForced">*</strong>
				            </label>
				            <div class="select">
				                <select convert-to-number iscroll-stop-propagation name="origin" id="origin" ng-class="{'placeholder': reservationParentData.demographics.origin == ''}" ng-model="reservationParentData.demographics.origin">
				                    <option value="" translate>ORIGIN_BOOKING_PLACEHOLDER</option>
				                    <option ng-repeat="origin in otherData.origins" value="{{origin.value}}" ng-selected="origin.value==reservationParentData.demographics.origin">{{origin.name}}</option>
				                </select>
				            </div>
				        </div>

				        <div class="entry margin" ng-if="shouldShowSegments">
				            <label for="origin">Segments<strong ng-show="otherData.segmentsIsForced">*</strong>
				            </label>
				            <div class="select">
				                <select convert-to-number iscroll-stop-propagation name="origin" id="origin" ng-class="{'placeholder': reservationParentData.demographics.segment == ''}" ng-model="reservationParentData.demographics.segment" ng-disabled="!!reservationParentData.demographics.segment">
				                    <option value="" translate>SEGMENT_PLACEHOLDER</option>
				                    <option ng-repeat="segment in otherData.segments" value="{{segment.value}}" ng-selected="segment.value==reservationParentData.demographics.segment">{{segment.name}}</option>
				                </select>
				            </div>
				        </div>
			        </div>
			    </fieldset>
			</div>
		</div>
	    <div class="actions">
	        <button class="button blank" ng-click="closeDialog()" ng-show="showNationality || showCountry || shouldShowDemographicsInValidationPopup">Cancel</button>
	        <button class="button blank" ng-click="ignoreAndGoToCheckin()" ng-show="!showNationality && !showCountry && !shouldShowDemographicsInValidationPopup" translate>IGNORE_AND_GOTO_CHECKIN</button>
	        <button class="button" ng-class="{'green': shouldEnableSubmitButton() || isDemographicsFormValid(), 'grey': !shouldEnableSubmitButton() || !isDemographicsFormValid()}" ng-disable="!(shouldEnableSubmitButton()) || !isDemographicsFormValid()" ng-click="submitAndGoToCheckin()">Submit</button>
	    </div>
	</div>
</div>