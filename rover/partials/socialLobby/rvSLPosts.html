
<div ng-include="'/assets/partials/common/header.html'"></div>

<!-- Search -->
<form method="get" action="{action}" id="neighbors-search-form" class="search-form neighbors-search" role="search">

    <!-- Refresh -->
    <button type="button" class="button white with-icon only-icon refresh">
        <span class="icons icon-reset"></span>
        Refresh
    </button>

    <!-- Search -->
    <div class="entry search">
        <button class="clear-query"> <!-- Add class 'visible' to show. -->
            <span class="icons icon-clear-search">Clear query</span>
        </button>
        <button type="submit" class="icons icon-search">Search</button>
        <input id="neighbors-query" class="query" placeholder="Search" type="search" autocomplete="off" />
    </div>
</form> 

<!-- Posts scenario 1: Nothing to show (L40-L48) -->
<section id="neighbors-activity" ng-show="posts.length == 0" class="content" role="main">
    <div class="no-content">
        <div class="info">
            <span class="icon-no-content icon-messages"></span>
            <strong class="h1">No conversations</strong>
            <span class="h2">Currently there are no conversations in the your Neighborhood</span>
        </div>
    </div>
</section> 

<!-- Posts scenario 2: Data exists (L51-L120) -->
<section id="neighbors-activity" ng-iscroll='post-list-scroll' ng-show="posts.length != 0" class="content scrollable neighbours-post-scroll" role="main">
    <div class="wrapper neighbours-post-container">
        <div class="activity-post" ng-class="{'has-replies': post.comment_count > 0}" ng-repeat = "post in posts"> <!-- Add class 'has-replies' if there are replies in the conversation. -->
            <div class="post-details" ng-class="{'toggle has-arrow': post.comment_count > 0}"> <!-- Add class 'toggle has-arrow' if there are replies in the conversation. Add class "has-unread" if there are undread posts in the conversation. -->
                <figure class="guest-image">
                    <img src="{{post.user.image_url}}" alt="" />
                    <!-- If VIP - <span class="vip">VIP</span> -->
                </figure>
                <div class="post-data">
                    <div class="author">
                        <h3>{{post.author_name}}</h3>
                        <!-- If not staff member, output job details (if they exist) -->
                        <span class="job-title">{{post.user.profession}}</span> 
                        <span class="job-title" ng-show="post.user.profession != '' && post.user.works_at != ''">,</span>
                        <span class="job-title">{{ " " + post.user.works_at}}</span>
                        <!-- If they exist, output Company / TA 7 Group / Allotment name -->


                        <!-- <em class="icons icon-{'guest-company' or 'guest-travelagent' or 'group' or 'allotment'}">{Name}</em> -->


                        <!-- If not staff member, show Stay Card link -->
                        <button type="button" class="button white brand-text small-button">Stay Card</button>
                        <!-- If staff member post, output this instad of L64, L66 and L68:
                        <em class="icons icon-staff-blue">Staff</em> -->
                    </div>
                    <h4 class="post" ng-class="{'staff': post.user_role != 'guest'}"> <!-- If this is a 1st level unread post, add class 'unread'. If staff post, add class 'staff'. If entered / left the lobby post, add class 'appearance' -->
                        <!-- If post has replies, show count like this:
                        <span class="icons icon-comment">{replies count}</span>-->
                        {{post.body}}
                    </h4>
                </div>
            </div>
            <button type="button" class="button white icons icon-remove-10">Delete</button>

            <!-- If post has replies-->
            <div class="conversation hidden"> <!-- Toggle class 'hidden' to show/hide when L55 is tapped/clicked -->
                <div class="reply-post">
                    <div class="post-details"> <!-- NO CLASSES TO ADD! -->
                        <figure class="guest-image">
                            <img src="{user-image}" alt="" />
                            <!-- If VIP - <span class="vip">VIP</span> -->
                        </figure>
                        <div class="post-data">
                            <div class="author">
                                <h3>{Lastname, Firstname}</h3>
                                <!-- If not staff member, output job details (if they exist) -->
                                <span class="job-title">{Job Title, Company}</span> 
                                <!-- If they exist, output Company / TA 7 Group / Allotment name -->
                                <em class="icons icon-{'guest-company' or 'guest-travelagent' or 'group' or 'allotment'}">{Name}</em>
                                <!-- If not staff member, show Stay Card link -->
                                <button type="button" class="button white brand-text small-button">Stay Card</button>
                                <!-- If staff member post, output this instad of L64, L66 and L68:
                                <em class="icons icon-staff-blue">Staff</em> -->
                            </div>
                            <h4 class="post"> <!-- If this is a 2nd level unread post, add class 'unread'. If staff post, add class 'staff'. If entered / left the lobby post, add class 'appearance' -->
                                {Post Text or 'Entered the Lobby' or 'Left the Lobby'}
                            </h4>
                        </div>
                    </div>
                    <button type="button" class="button white icons icon-remove-10">Delete</button>
                </div>
                ... repeat L82-L106 for every reply
                <div class="conversation-reply"><!-- Add class 'numbers-pagination' if 2nd level pagination is showing as well -->
                    <input placeholder="Add comment to this conversation"  type="text" />
                    <button type="button" class="button soft-red" >Post</button>
                    <!-- If showing 2nd level pagination, output this:
                    <div class="pages">
                        same logic as 1st level pagination, see L130-L149
                    </div>  -->
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Post form -->
<div class="neighbors-form add-post"> <!-- Add class 'numbers-pagination' if 1st level pagination is showing as well -->
    <input type="text" placeholder="Add comment" ng-model = "newPost" />
    <button type="button" class="button white soft-red-text" ng-click="addPost();">Post</button>

    <!-- If showing 1st level pagination, output this -->
    <div class="pages"> <!-- Add class "active" to selected number -->
        
        <!-- If not first page, show prev button:
        <button type="button" class="button prev">Prev</button> -->
        
        <!-- First page, always show it -->
        <button type="button" class="button dark-grey number" ng-click="paginatePosts(1)" ng-class="{'active' : postParams.page != 1}">First</button> 

        <!-- If not first page, and there's more than 5 pages to show, show this:
        <span class="delimiter">...</span> -->

        <!-- Next 3 page numbers -->
        <button type="button" class="button dark-grey number" ng-click="paginatePosts(postParams.page -1)" ng-class="{'active' : postParams.page != 1}">Prev</button>
        <button type="button" class="button dark-grey number active">{{postParams.page}}</button>
        <button type="button" class="button dark-grey number" ng-click="paginatePosts(postParams.page +1)" ng-class="{'active' : postParams.page < totalPostPages }">Next</button>

        <!-- If not last page, and there's more than 5 pages to show, show this:
        <span class="delimiter">...</span> -->
        <button type="button" class="button dark-grey number" ng-click="paginatePosts(totalPostPages)" ng-class="{'active' : postParams.page < totalPostPages }">Last</button>

        <!-- If not last page, show next button:
        <button type="button" class="button next">Next</button> -->
    </div>
</div>