<span ng-controller="RVAccountsReceivablesController">

    <!-- Search form -->
    <form method="get" action="" name="accounts-receivables-search-form" id="accounts-receivables-search-form" class="search-form has-options three-options" role="search">
        <div class="entry search">
            <button id="accounts-receivables-clear-query" class="clear-query">
                <span class="icons icon-clear-search">Clear query</span>
            </button>
            <button type="submit" name="submit" class="icons icon-search">Search</button>
            <input name="accounts-receivables-query" id="accounts-receivables-query" class="query" placeholder="Search by AR Account Name or Number, IATA Number, Corporate ID or City" type="search" autocomplete="off" >
        </div>
        <div class="entry options">
            <div class="input with-label">
                <label for="min-amount">Min. Amount ($)</label>
                <input ng-model="filterData.minAmount" type="text">
            </div>

            <div class="select with-label larger-select">
                <label for="sort-by">Sort By</label>
                <select ng-model="filterData.sortBy" id="sort-by">
                    <option ng-repeat="item in filterData.sortList" value="{{item.value}}">{{item.name}}</option>
                </select>
            </div>

            <div class="select with-label">
                <label for="ageing-days">Ageing Days</label>
                <select ng-model="filterData.ageingDays" id="ageing-days">
                    <option ng-repeat="item in filterData.ageingDaysList" value="{{item.value}}"></option>
                </select>
            </div>
        </div>
    </form>

    <!-- Search pagination -->
    <div class="search-pagination" ng-show="arOverviewData.total_result >= filterData.perPage && arOverviewData.accounts.length > 0">
        <button type="button" class="button dark-grey next" ng-click="loadNextSet()" ng-disabled="isNextButtonDisabled()">Next</button>
        <button type="button" class="button dark-grey prev" ng-click="loadPrevSet()" ng-disabled="isPrevButtonDisabled()">Previous</button>
        <p>Showing <strong>{{start}}-{{end}}</strong> of <strong id="total-count">{{arOverviewData.total_result}}</strong> items</p>
    </div>

    <!-- Search panel - WITH RESULTS -->
    <section class="content accounts-ar-content" role="main">
        <div class="accounts-ar-header">
            <ul class="accounts-ar-totals">
                <li class="guest-bills">
                    <span>Open Guest Bills</span>
                    <span class="amount">{{arOverviewData.open_guest_bill}}</span>
                </li>
                <li class="unpaid-balance">
                    <span>Unpaid Balance</span>
                    <span class="amount red">{{arOverviewData.unpaid_balance}}</span>
                </li>
            </ul>
        </div>
        <!-- Add Scroll -->
        <div class="accounts-ar-list scrollable" ng-iscroll='arOverViewScroll'>
            <div class="wrapper" >
                <ul class="search-results">
                    <li class="account-ar" ng-repeat="account in arOverviewData.accounts">
                        <a>
                            <div class="account-image icons" ng-class="{'icon-travel-agent': account.type === 'TRAVELAGENT','icon-company': account.type === 'COMPANY'}"></div>
                            <div class="data">
                                <h2>{{account.account_name}}</h2>
                                <strong class="confirmation">{{account.account_number}}</strong>
                                <span ng-if="account.type === 'TRAVELAGENT'" class="icons icon-guest-travelagent">{{account.ar_number}}</span>
                                <span ng-if="account.type === 'COMPANY'" class="icons icon-guest-company">{{account.ar_number}}</span>
                                <span class="icons icon-time confirmation">{{account.aging_date}}</span>
                            </div>
                            <div class="info-holder">
                                <div class="info ageing-days">
                                    <strong>{{account.aging_days}}</strong>
                                    <span>Ageing Days</span>
                                </div>
                                <div class="info open-bills">
                                    <strong>{{account.open_bill}}</strong>
                                    <span>Open Bills</span>
                                </div>
                                <div class="info balance">
                                    <strong ng-class="{'red':account.current_balance >= 0, 'green':account.current_balance < 0 }">
                                        {{account.current_balance}}
                                    </strong>
                                    <span>Balance</span>
                                </div>
                            </div>
                        </a>
                    </li>
                    
                </ul>        
            </div>
        </div>
    </section>

</span>