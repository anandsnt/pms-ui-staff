<div id="modal" class="modal-show" ng-class="{'modal-show': !modalClosing}" role="dialog">
    <div class="modal-content form card-authorize">
    	<button ng-click="closeDialog()" class="modal-close" id="modal-close" type="button"><span class="icons icon-close invert"></span></button>
        <div ng-include="'/assets/partials/common/notification_message.html'"></div>
        <fieldset class="content-left">
            <strong class="h2 message">Credit Cards</strong>
            <div class="credit-cards scrollable" ng-iscroll='cardsList' ng-iscroll-delay='300'>
                <div class="wrapper">
                    <button ng-click="selectCCforAuth($index)" class="block-item item-payment" ng-class="{ 'item-active' : card.active }" ng-repeat="card in authData.billData">
                        <figure class="card-logo">
                            <img ng-src="/assets/images/{{card.card_code | lowercase }}.png" alt="" />
                        </figure>
                        <span class="number">No. 
                            <span class="value">{{card.card_number}}</span>
                        </span>
                        <span class="code">Code 
                            <span class="value" ng-if="card.last_authorization.code">{{card.last_authorization.code}}</span>
                            <span class="value" ng-if="!card.last_authorization.code">-</span>
                        </span>
                        <span class="amount">Amount 
                            <span class="value" ng-if="card.last_authorization.amount">{{ currencySymbol }}{{card.last_authorization.amount}}</span>
                            <span class="value" ng-if="!card.last_authorization.amount">-</span>
                        </span>
                    </button>
                    
                </div>
            </div>
        </fieldset>

        <fieldset class="content-right">
            <span class="h2 message" ng-hide="authData.selectedCardDetails.name == '' && authData.selectedCardDetails.number == '' " >{{authData.selectedCardDetails.name}} No. {{authData.selectedCardDetails.number}}
            </span>
            
            <span class="text" ng-hide="authData.selectedCardDetails.last_auth_date == '' ">Last Authorization: 
                <time>{{authData.selectedCardDetails.last_auth_date | date : dateFormat}}</time>
            </span>
            
            <div class="authorization-bills scrollable">
                <div class="wrapper">
                    <table>
                        <tr>
                            <td>
                                Bill #
                            </td>
                            <td class="value">
                                {{authData.selectedCardDetails.bill_no}}
                            </td>
                            <td>
                                Balance
                            </td>
                            <td class="value" ng-class="{ 'green' : authData.selectedCardDetails.bill_balance == 0.00, 'red' : authData.selectedCardDetails.bill_balance > 0.00 }">
                                {{ currencySymbol }} {{authData.selectedCardDetails.bill_balance}}
                            </td>
                        </tr>
                        
                    </table>
                </div>
            </div>

            <div class="entry full-width">
                <label for="auth-amount">Additional Amount (<span>{{ currencySymbol }}</span>)</label>
                <input ng-model="authData.authAmount" id="auth-amount" value="" type="text" />
            </div>

            <div class="entry manual_auth full-width hidden">
                    <label for="{Manual Checkbox ID}" class="checkbox inline"> <!-- Add class 'checked' if checked -->
                        <span class="icon-form icon-checkbox"></span> <!-- Add class 'checked' if checked -->
                        <input id="{Manual Checkbox ID}" value="1" type="checkbox" />
                        Manual Auth.
                    </label>
                    <!-- Remove class hidden if Manual Auth. is checked -->
                    <input type="text" value="" class="hidden" placeholder="Enter Auth Code" />
            </div>

            <div class="actions">
                <button ng-click="authorize()" ng-disabled="!authData.manualCCAuthPermission" ng-class="{'grey':!authData.manualCCAuthPermission }" type="button" class="button green">Authorize</button>
                <button ng-click="closeDialog()" type="button" class="button blank">Cancel</button>
            </div>
        </fieldset>
    </div>
</div>