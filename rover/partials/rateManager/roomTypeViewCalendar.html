<div id="roomTypeViewCalendar" style="height:{{uiOptions.tableHeight}};  " ng-iscroll="RateCalendarCtrl" ng-iscroll-delay="1000">
	<table class="rate-calendar" style="width:{{uiOptions.tableWidth}};">
		<thead>
			<tr>
				<th width="220" style="{width:th.width}" class="first-row actions">
					<button ng-click="openCloseAllRestrictions('remove')" class="button green" ng-class="{'open': calendarData.disableOpenAllBtn}" ng-disabled="calendarData.disableOpenAllBtn"> Open All</button>	
					<button ng-click="openCloseAllRestrictions('add')" class="button red" ng-class="{'open': calendarData.disableCloseAllBtn}" ng-disabled="calendarData.disableCloseAllBtn"> Close All</button>	
				</th>
				<th width="{{uiOptions.columnWidth}}" style="{width:th.width}"  ng-repeat="date in calendarData.dates" class="cell">
					<div class="date-header">
						<span class="week-day">{{date| date:'EEEE'}}</span>
						<span>{{date| date:'MMMM dd'}}</span>
					</div>
					<div class="cell-overlay" ng-if="isHistoryDate(date)"></div>

				</th>
			</tr>
		</thead>

		<tbody>
			<tr ng-show="calendarData.data.length > 1">
				<td class="first-row">
					<span class="bolder">All room types</span>
					<span>&nbsp;</span>
				</td>
				<td ng-repeat="date in calendarData.dates" class="cell"> 
					<div class="cell-container">
						<div class="cell-content" ng-click="showUpdatePriceAndRestrictionsDialog(date, '', '', 'ROOM_TYPE', true)">
							<div>
								<div>
									<span ng-repeat="restriction in calendarData.rate_restrictions[date] track by restriction.restriction_type_id" class="restriction-icon right {{calendarData.restriction_types[
									restriction.restriction_type_id].background_class}} {{calendarData.restriction_types[restriction.restriction_type_id].icon}}" ng-if="calendarMode === 'ROOM_TYPE_VIEW'" >
									{{restriction.days}}
									</span>
								</div>
							</div>
						</div>
						<div class="cell-overlay" ng-if="isHistoryDate(date)"></div>
					</div>
				</td>
			</tr>

		<tr ng-repeat="rate in calendarData.data track by rate.id" ng-class="{'last': $last}">
			<td class="first-row">    
				<span ng-class="{'expanded': currentExpandedRow===$index}">{{rate.name}}</span>
				<span style="float:right" ng-hide="currentExpandedRow===$index">
					<img class="down" src="/assets/arrow-down.png" ng-click="expandRow($index)">
				</span>
				<span style="float:right" ng-show="currentExpandedRow===$index">
					<img class="up" src="/assets/arrow-up.png" ng-click="expandRow($index)">
				</span>
			</td>

			<td ng-repeat="date in calendarData.dates" class="cell" ng-hide="currentExpandedRow===$parent.$index" >
				<div class="cell-container">
					<div class="cell-content" ng-click="showUpdatePriceAndRestrictionsDialog(date, '', rate.id, 'ROOM_TYPE', false)">
						<div>
							<span class="left rate-single">
								<span ng-if ="rate[date].single === null">{{rate[date].single}}</span>
								<span ng-if ="rate[date].single !== null">{{rate[date].single | number : 2}}</span>
							</span>
							<div class="limit-width">
								<span ng-repeat="restriction in rate[date].restrictions track by restriction.restriction_type_id" class="restriction-icon right {{calendarData.restriction_types[restriction.restriction_type_id].background_class}} {{calendarData.restriction_types[restriction.restriction_type_id].icon}}" ng-if="rate[date].restrictions.length > 0">
									{{restriction.days}}
								</span>
							</div>
						</div>	
					</div>	
					<div class="cell-overlay" ng-if="isHistoryDate(date)"></div>
				</div>
			</td>
			<td ng-repeat="date in calendarData.dates" class="cell" ng-show="currentExpandedRow===$parent.$index" >
				<div class="exp cell-container">
					<div class="exp cell-content" ng-click="showUpdatePriceAndRestrictionsDialog(date, '', rate.id, 'ROOM_TYPE', false)">
						<div>
							<div>
								<div>
									<span ng-repeat="restriction in rate[date].restrictions track by restriction.restriction_type_id" class="restriction-icon right {{calendarData.restriction_types[restriction.restriction_type_id].background_class}} {{calendarData.restriction_types[restriction.restriction_type_id].icon}}" ng-if="rate[date].restrictions.length > 0">
										{{restriction.days}}
									</span>
								</div>
								<div>Single 
									<span ng-if ="rate[date].single === null">{{rate[date].single}}</span>
									<span ng-if ="rate[date].single !== null">{{rate[date].single | number : 2}}</span>
								</div>
								<div>Double 
									<span ng-if ="rate[date].double === null">{{rate[date].double}}</span>
									<span ng-if ="rate[date].double !== null">{{rate[date].double | number : 2}}</span>

								</div>
								<div>Extra Adult 
									<span ng-if ="rate[date].extra_adult === null">{{rate[date].extra_adult}}</span>
									<span ng-if ="rate[date].extra_adult !== null">{{rate[date].extra_adult | number : 2}}</span>

								</div>
								<div>Child 
									<span ng-if ="rate[date].child === null">{{rate[date].child}}</span>
									<span ng-if ="rate[date].child !== null">{{rate[date].child | number : 2}}</span>

								</div>
							</div>
						</div>
					</div>
				<div class="cell-overlay" ng-if="isHistoryDate(date)"></div>
				</div>
			</td>
		</tr>
	</tbody>
</table> 
</div>
<div class="restriction-legends" >
	<span ng-repeat="restrictionType in calendarData.restriction_types track by restrictionType.id">
		<span class="restriction-icon {{restrictionType.background_class}} {{restrictionType.icon}}">{{restrictionType.days}}</span>
		<span>{{restrictionType.description}}</span>
	</span>
</div> 