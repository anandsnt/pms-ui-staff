<!-- login an cancel mode -->
<section id="main" class="centered" role="main" click-touch='resetTime()' ng-show="mode === 'login-mode'">
    <div id="content">
        <h1>
            <text data-ng-bind-html="getTagValue('ADMIN_HEADER')" editable-text="ADMIN_HEADER"></text>
        </h1>
        <!-- Admin -->
        <button type="button" class="button done-btn" touch-press="loginAdmin()">
            <text data-ng-bind-html="getTagValue('ADMIN_LOGIN')" editable-text="ADMIN_LOGIN"></text>
        </button>
        <button type="button" class="button done-btn transparent" touch-press="navToPrev()">
            <text data-ng-bind-html="getTagValue('ADMIN_EXIT')" editable-text="ADMIN_EXIT"></text>
        </button>
    </div>
    <span ng-include="'/assets/partials_v2/zsTabletFooter.html'"></span>
</section>
<!-- credentials entry page -->
<section id="main" class="centered test" role="main" ng-show=" mode ===  'admin-name-mode' || mode === 'admin-password-mode'">
    <div id="content" class="input-field-contents">
        <h1>{{headingText |translate}}</h1>
        <h3>{{subHeadingText |translate}}</h3>
        <!-- user name -->
        <form method="post" class="form" ng-hide='passwordField'>
            <div class="entry input">
                <input type="text" placeholder="" ng-focus="showOnScreenKeyboard('input_text')" click-touch="showOnScreenKeyboard('input_text')" ng-model="input.inputTextValue" enter-press="goToNext()" id="input_text" touch-press/>
            </div>
            <div class="entry action">
                <button type="button" class="button" touch-press='goToNext()' ng-class="{'overlay': input.inputTextValue.length < 1}">
                    <text data-ng-bind-html="getTagValue('NEXT_BTN')" editable-text="NEXT_BTN"></text>
                </button>
            </div>
        </form>
        <!-- password -->
        <form method="post" class="form" ng-show='passwordField'>
            <div class="entry input">
                <input type="password" placeholder="" ng-focus="showOnScreenKeyboard('password_text')" click-touch="showOnScreenKeyboard('password_text')" ng-model="input.inputTextValue" enter-press="goToNext()" id="password_text" touch-press/>
            </div>
            <div class="entry action">
                <button type="button" class="button" touch-press='goToNext()' ng-class="{'overlay': input.inputTextValue.length < 1}">
                    <text data-ng-bind-html="getTagValue('NEXT_BTN')" editable-text="NEXT_BTN"></text>
                </button>
            </div>
        </form>
        <div class="entry action" ng-show='adminLoginError'>
            <button type="button" class="button centered-exit done-btn" touch-press='clickedOnCloseButton(); resetTime()'>
                <text data-ng-bind-html="getTagValue('EXIT_BTN')" editable-text="EXIT_BTN"></text>
            </button>
        </div>
    </div>
    <span ng-include="'/assets/partials_v2/zsTabletFooter.html'" click-touch='resetTime()'></span>
</section>
<!-- Content -->
<section id="main" class="admin-screen" role="main" ng-show="mode === 'admin-screen-active'" ng-class="{'no-main-bg':zestStationData.theme === 'zoku'}">
    <label class='admin-screen-title'>Zest Station Local Admin Settings</label>
    <div id="content" class="input-field-contents admin-field-contents">
        <div id="textual" class="tabled-options" style="max-height: 559px;" ng-iscroll="admin-screen" ng-iscroll-delay="100" ng-init="setScroll()">
            <div class="wrapper">
                <div id="handler-connected-status" class="entry with-label" ng-show='inChromeApp'>
                    <label>Zest Station Handler</label>
                    <!--label class='admin-label-description'></label-->
                    <input readonly="" class="read-only visible" ng-model="zestStationData.stationHandlerConnectedStatus" ng-class='{"green-text":zestStationData.stationHandlerConnectedStatus == "Connected","red-text":zestStationData.stationHandlerConnectedStatus == "Not-Connected"}'>
                    <div class='refresh-svg' touch-press='refreshSocketConnection()' ng-class='{"station-mini-loading":zestStationData.stationHandlerConnectedStatus == "Connecting..."}'></div>
                </div>
                <div class="entry with-label">
                    <label>Workstation</label>
                    <div class="entry select">
                        <select ng-options="workstation.id as workstation.name for workstation in zestStationData.workstations" ng-model="workstation.selected" ng-change="worksStationChanged()">
                            <option style="display:none" value="" class="">Select</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label">
                    <label>Workstation Status</label>
                    <div class="entry select">
                        <select id="order-status" ng-model="zestStationData.workstationStatus">
                            <option value="">Select</option>
                            <option value="in-order">In Order</option>
                            <option selected="selected" value="out-of-order">Out of Order</option>
                        </select>
                    </div>
                </div>


                <div id="order-reason" class="entry with-label" ng-show="zestStationData.workstationStatus === 'out-of-order'">
                    <label click-touch='toggleOOSHist()'>Out of Order Reason</label>
                    <label click-touch='toggleOOSHist()' ng-if="zestStationData.sessionOosReason.length > 0" class='admin-label-description' >Tap here to see history of Out of Order Reasons</label>
                    <label ng-if="zestStationData.sessionOosReason.length===0" class='admin-label-description'>No Out of Order history this session</label>
                    <input readonly="" class="read-only" ng-model="zestStationData.workstationOooReason">
                </div>

                <div class="entry with-label oos-reason-hist" ng-hide="!show_oos_history" ng-repeat="reason in zestStationData.sessionOosReason">
                    <label></label>
                    <label class='admin-label-description'>{{reason.datetime}}</label>
                    <input readonly="" class="read-only" type='text' value='{{reason.reason}}'>
                </div>

                <div class="entry with-label" ng-show="isIpad">
                    <label>Connected Device Name</label>
                    <input readonly="" class="read-only" type='text' value="{{zestStationData.connectedDeviceDetails.device_short_name}}">
                </div>

                <div id="handler-connected-status" class="entry with-label" ng-show="isIpad">
                    <label>Device Status</label>
                    <!--label class='admin-label-description'></label-->
                    <input readonly="" class="read-only visible" ng-model="zestStationData.connectedDeviceDetails.device_connection_state" ng-class='{"green-text":zestStationData.connectedDeviceDetails.device_connection_state == "Connected","red-text":zestStationData.connectedDeviceDetails.device_connection_state !== "Connected", "black-text" : zestStationData.connectedDeviceDetails.device_connection_state === "N/A"}'>
                    <div class='refresh-svg' touch-press='fetchDeviceStatus()' ng-class='{"station-mini-loading":zestStationData.connectedDeviceDetails.device_connection_state == "refreshing..."}'></div>
                </div>

                <div class="entry with-label">
                    <label class='admin-item-label'>Station Idle Timer</label>
                    <div class="entry select">
                        <select ng-model="zestStationData.idle_timer.enabled">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                    </div>
                </div>

                <div class="entry with-label">
                    <label>Idle Screen Prompt After (seconds)</label>
                    <label class='admin-label-description'>Prompt user to see if they are still using the Station after {{zestStationData.idle_timer.prompt}} seconds of no activity</label>
                    <input touch-press id="prompt_text" ng-focus="showOnScreenKeyboard('prompt_text')" click-touch="showOnScreenKeyboard('prompt_text')" type="number" min='1' max='{{zestStationData.idle_timer.max}}' ng-model='zestStationData.idle_timer.prompt' class='admin-input admin-input' />
                </div>
                <div class="entry with-label">
                    <label>Idle Time-Out (seconds)</label>
                    <label class='admin-label-description'>Return to Home Screen after {{zestStationData.idle_timer.max}} seconds of no activity</label>
                    <input touch-press id="timeout_text" ng-focus="showOnScreenKeyboard('timeout_text')" click-touch="showOnScreenKeyboard('timeout_text')" type="number" min='1' max='9999' ng-model='zestStationData.idle_timer.max' class='admin-input admin-input' />
                </div>
                <div class="entry with-label" ng-hide="!isIpad">
                    <label>Printer</label>
                    <!-- <input touch-press id="prompt_text" disabled="true" ng-model='zestStationData.printerLabel' click-touch='openPrinterMenu()'/> -->
                    <div class="entry select" touch-press='openPrinterMenu()'>
                        <select disabled="true" ng-model="zestStationData.printer_selected">
                            <option value="">{{printerLabel}}</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label" ng-show="zestStationData.useExtCamera">
                    <label>ID scan Camera</label>
                    <div class="entry select">
                        <select ng-model="selectedCamera" class="placeholder" ng-options="camera.id as camera.label for camera in zestStationData.connectedCameras">
                            <option value="" disabled> Select Camera</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption">
                    <label>Demo Mode</label>
                    <label class='admin-label-description'>Allows Station to simulate a check-in card swipe and key encoding</label>
                    <div class="entry select">
                        <select ng-model="zestStationData.demoModeEnabled">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                    </div>
                </div>
                <!-- MOBILE KEY DEMO OPTIONS -->
                <div class="entry with-label" ng-show="showDebugModeOption">
                    <label>Mobile Key Demo Mode</label>
                    <label class='admin-label-description'>Try out the new Mobile Key screens</label>
                    <div class="entry select">
                        <select ng-change='runRefreshScroller()' ng-model="zestStationData.demoMobileKeyModeEnabled">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.demoMobileKeyModeEnabled === 'true' ">
                    <label>Mobile Key Demo-Flow (User with App or not)</label>
                    <label class='admin-label-description'>Select (With-App) if you want to test the with-app flow</label>
                    <div class="entry select">
                        <select ng-model="zestStationData.demoMobileKeyModeEmailLinked">
                            <option value="true">Email Linked with App</option>
                            <option value="false">No App/Email Found</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.demoMobileKeyModeEnabled === 'true' ">
                    <label>Mobile Key Demo-Flow (User with App or not)</label>
                    <label class='admin-label-description'>If user has an email on-file, we'll send the app link there, otherwise we should collect email</label>
                    <div class="entry select">
                        <select ng-model="zestStationData.demoMobileKeyModeUserEmailOnFile">
                            <option value="true">User with Email on File</option>
                            <option value="false">No Email</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.demoMobileKeyModeEnabled === 'true' ">
                    <label>Mobile Key Demo-Flow (Third Party App)</label>
                    <label class='admin-label-description'>If the Hotel has a Non-SNT Mobile Key, select Third Party</label>
                    <div class="entry select">
                        <select ng-model="zestStationData.thirdPartyMobileKey">
                            <option value="true">Third Party</option>
                            <option value="false">Default</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.demoMobileKeyModeEnabled === 'true' ">
                    <label>Try Mobile Key Flow</label>
                    <label class='admin-label-description'>Clicking this button will take you directly to the mobile key flow for Testing Only</label>
                    <div class="select button done-btn" type="button" touch-press="testRunMobileKeyCheckin()">
                        Run Test
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.ccReader === 'local'">
                    <label>Test Local CC Swipe</label>
                    <label class='admin-label-description'>Clicking this button will take you directly to the mobile key flow for Testing Only</label>
                    <div class="select button done-btn" type="button" touch-press="testReadLocalDevice()">
                        Start
                    </div>
                </div>
                <!--END MOBILE KEY DEMO OPTIONS -->
                <div class="entry with-label" ng-show="showDebugModeOption">
                    <label>Skip Check-In</label>
                    <label class='admin-label-description'>Allows Station to simulate a successful Check-In (so you can re-use your reservation)</label>
                    <div class="entry select">
                        <select ng-model="zestStationData.noCheckInsDebugger">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                    </div>
                </div>
                <div class="entry with-label">
                    <label>Text Editor Mode</label>
                    <label class='admin-label-description'>Allows Station user to edit text by double-clicking current text. *Works best via Internet Browser</label>
                    <div class="entry select">
                        <select class='admin-editor-toggle' ng-model="zestStationData.editorModeEnabled" ng-change='setEditorModeCls()'>
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                    </div>
                </div>

               <!--  <div class="entry with-label" ng-if='zestStationData.check_in_collect_passport'>
                    <label>Guest ID Scan Override</label>
                    <label class='admin-label-description'>Enable Samsotech Scanning with for Passports or Passports and Guest IDs </label>
                    <div class="entry select">
                        <select class='admin-editor-toggle' ng-model="zestStationData.v1GuestIDScanning">
                            <option value="true">Scan Passports Only</option>
                            <option value="false">Passports + Guest IDs</option>
                        </select>
                    </div>
                </div> -->

                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.kiosk_is_hue_active">
                    <label>Test Hue Light</label>
                    <label class='admin-label-description'>Test the connectivity of the Hue light corresponding to the selected workstation</label>
                    <div class="select button done-btn" type="button" touch-press="turnOnLight(selectedWorkstationLightId)">
                        Light ON
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && zestStationData.kiosk_is_hue_active">
                    <label>Turn Off Hue Light</label>
                    <label class='admin-label-description'></label>
                    <div class="select button done-btn" type="button" touch-press="turnOffLight(selectedWorkstationLightId)">
                        Light OFF
                    </div>
                </div>
                <div class="entry with-label" ng-show="showDebugModeOption && isIpad && zestStationData.zest_printer_option === 'RECEIPT'">
                    <label>Print Sample Reg. card</label>
                    <label class='admin-label-description'></label>
                    <div class="select button done-btn" type="button" touch-press="printSampleReceipt()">
                        Print
                    </div>
                </div>
            </div>
        </div>
        <div id="actions" class="align-center">
            <button type="button" class="button" touch-press='cancelAdminSettings()'>Cancel</button>
            <button type="button" ng-disabled="!workstation.selected" ng-class="{'disabled-button':!workstation.selected}" class="button button-left-margin" touch-press='saveSettings()'>Save</button>
            <button type="button" class="button button-left-margin" touch-press='logOutApplication()'>Logout</button>
            <button ng-show="showDebugModeOption" type="button" class="button button-left-margin" touch-press='toggleDiagnostics()'>Diagnostics</button>
            <button ng-show="showDebugModeOption" type="button" class="button button-left-margin" click-touch='reload()'>Refresh</button>
        </div>
    </div>
    <div>
        <button class='button blue invis bottom-left' click-touch="toggleDebugMode()">
            Admin
        </button>
    </div>
</section>
<!-- Popup -->
<div class="popup" ng-class="{'open': showPrintMsgPopup}">
    <div class="popup-content">
        <h2 class="nocaps">
            {{ printMessage }}
        </h2>
        <button type="button" class="button idle-timeout-btn" click-touch='closePrintErrorPopup();'>
            CLOSE
        </button>
    </div>
</div>

<div id="popup-overlay" ng-class="{'open': showPrintMsgPopup}" 
    style="background: #e5e5e5;
            width: 100%;
            height: 100%;
            z-index: 800;
            position: fixed;
            opacity: 0.8;
            top: 0;">
</div>
