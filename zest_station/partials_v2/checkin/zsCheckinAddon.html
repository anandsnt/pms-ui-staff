<!-- Add .open to show the popup -->
<div class="popup" ng-class="{'open':showAddonPopup && !selectedAddon.isLco}">
   <div class="popup-content add-on">
      <!-- <i class="close-popup" touch-press="closePopup()"></i> -->
      <div class="add-on-picture">
         <img src="{{selectedAddon.image}}" />
      </div>
      <div class="add-on-content">
         <h2>{{selectedAddon.name}}</h2>
         <p ng-bind-html="selectedAddon.description"></p>
         <div class="price">
            <div class="amount">
               <strong>+{{zestStationData.currencySymbol}}{{selectedAddon.amount}}</strong>
               <small><span ng-show="upsellDisplayOrderAmountFirst">{{selectedAddon.amount_type_label}}&nbsp;{{selectedAddon.post_type_label}}&nbsp;</span><span ng-hide="upsellDisplayOrderAmountFirst">{{selectedAddon.post_type_label}}&nbsp;{{selectedAddon.amount_type_label}}&nbsp;</span><span ng-show="selectedAddon.display_suffix">{{selectedAddon.suffix_label}}</span></small>
            </div>
            <div class="action">
               <div class="input-group" ng-show="isAddonFlatOrRoomType(selectedAddon)">
                  <button type="button" class="button" click-touch="decrementAddonQuantity()" ng-class="{'disabled':selectedAddonCount ===0}" ng-disabled="selectedAddonCount === 0">-</button>
                  <input type="text" value="{{selectedAddonCount}}">
                  <button type="button" class="button" click-touch="incrementAddonQty()">+</button>
               </div>
               <div class="input-group" ng-hide="isAddonFlatOrRoomType(selectedAddon)">
                  <!--  <span ng-hide="selectedAddon.is_selected" editable-text="ADD">{{'ADD_ADDON' |translate}}</span>
                     <span ng-show="selectedAddon.is_selected" editable-text="REMOVE">{{'REMOVE_ADDON' |translate}}</span> -->
                  <button type="button" class="button" click-touch="decrementAddonQtyForNonRoomFlatType()" ng-class="{'disabled':selectedAddonCount ===0}" ng-disabled="selectedAddonCount === 0">-</button>
                  <input type="text" value="{{selectedAddonCount}}" disabled>
                  <button type="button" class="button" click-touch="incrementAddonQtyForNonRoomFlatType()" ng-class="{'disabled':selectedAddonCount ===1}" ng-disabled="selectedAddonCount === 1">+</button>
               </div>
               <button type="button" data-action="popup" class="button transparent" click-touch="addOnDoneButtonClicked(selectedAddon)" ng-class="{'transparent text-red':selectedAddonCount === 0 && selectedAddon.is_selected}">
               <text data-ng-bind-html="getTagValue('DONE_BTN')" editable-text="DONE"></text>
               </button>
            </div>
         </div>
      </div>
   </div>
</div>


<!-- Add .open to show the popup -->
<div class="popup" ng-class="{'open':showAddonPopup && selectedAddon.isLco}">
    <div class="popup-content add-on large">
        <div class="add-on-content">
        <h2> 
            <text data-ng-bind-html="getTagValue('LATE_CHECKOUT_HEADING')" editable-text="LATE_CHECKOUT_HEADING">
            </text>
         </h2>
         <p>
            <text data-ng-bind-html="getTagValue('LATE_CHECKOUT_INSTRUCTIONS')" editable-text="LATE_CHECKOUT_INSTRUCTIONS">
            </text>
         </p>
        <!-- CASE 2: Late Checkout Addon (use this instead of L21-L40) -->
         <nav id="options" role="nav">
            <ul role="menu">
               <li ng-repeat="addon in selectedAddon.addons">
                  <button type="button" class="button option" ng-class="{'not-selected': addon.addon_id !== selectedLcoAddonId}" ng-click="selectDeselectLco(addon)"><!-- When time is selected, add class 'not-selected' to all slots which are NOT SELECTED. If there's not time slot selected, remove class 'not-selected' from all. -->
                     <span class="icon-text">{{addon.time}} PM</span>
                     <span ng-show="theme === 'yotel'" class="icon-img"ng-include="icons.url.late_checkout_icon"></span>
                     <!-- If Yotel, show icon:
                     {../assets/yotel/icons/checkout.svg} -->
                  </button>
                  <span class="amount">{{zestStationData.currencySymbol}}{{addon.amount | number:2}}</span>
                  <span ng-show="addon.display_suffix">{{addon.suffix_label}}</span>
               </li>
            </ul>
         </nav>
         <div class="price">
         <div class="action">
            <button type="button" data-action="popup" class="button transparent" click-touch="addRemoveLcoAddon()" ng-show="selectedLcoAddonId !== ''" ng-class="{'text-red':lcoRemoveMode()}">
            <text data-ng-bind-html="getTagValue('ADD_ADDON')" editable-text="ADD_ADDON" ng-hide="lcoRemoveMode()"></text>
            <text data-ng-bind-html="getTagValue('REMOVE_ADDON')" editable-text="REMOVE_ADDON" ng-show="lcoRemoveMode()" class="transparent text-red"></text>
            </button>
            <button type="button" data-action="popup" class="button transparent" click-touch="lcoAddonsBackAction()">
            <text data-ng-bind-html="getTagValue('NAV_BACK')" editable-text="NAV_BACK"></text>
            </button>
         </div>
         </div>
        </div>
    </div>
</div>


      <!-- Add .open to show the popup -->
<div class="popup" ng-class="{'open':showErrorPopUp}">
   <!-- Remove class "open" to hide popup content -->
   <div class="popup-content">
      <h2 class="nocaps">
         <text editable-text="{{errorHeader}}"> {{ errorHeader  |translate}}</text>
      </h2>
      <h3 editable-text="{{errorMessage}}"> {{errorMessage | translate}}</h3>
      <button type="button" class="button" click-touch='showErrorPopUp = false'>
         <text data-ng-bind-html="getTagValue('DONE_BTN')" editable-text="DONE"></text>
      </button>
   </div>
</div>
<!-- add .open when showing popuo -->
<div id="popup-overlay" ng-class="{'open':showAddonPopup || showErrorPopUp}"></div>
<!-- Show blank section -->
<section id="main" ng-hide="loadingCompleted"></section>
<!-- Content -->
<section id="main" class="addon-screen" role="main" ng-show="mode !== 'SINGLE_ADDON_ERROR' && loadingCompleted">
   <div id="content">
      <h1>
         <text data-ng-bind-html="getTagValue('ADD_ON_HEADING')" editable-text="ADD_ON_HEADING"></text>
      </h1>
      <div id="upgrades">
         <ul class="add-on-list add-on-list-columns" ng-if="addonsList.length > 1" ng-class="{'add-on-list-rows':pageData.viewableItems.length >= 4}">
            <li class="add-on" ng-repeat="addon in pageData.viewableItems" click-touch="addonSelected(addon)" ng-class="{'selected':addon.is_selected || addon.quantity >0}">
               <div class="add-on-picture">
                  <img src="{{addon.image}}">
               </div>
               <div class="add-on-content">
                  <h2 ng-hide="addon.isLco">{{addon.name}}<span ng-show="addon.quantity>0">&nbsp;({{addon.quantity}})</span></h2>
                  <h2 ng-show="addon.isLco">
                      <text data-ng-bind-html="getTagValue('LATE_CHECKOUT_HEADING')" editable-text="LATE_CHECKOUT_HEADING">
                      </text>
                  </h2>
                  <div class="price" ng-hide="addon.isLco">
                     {{zestStationData.currencySymbol}}{{addon.amount}}
                  </div>
               </div>
            </li>
         </ul>
         <ul class="add-on-list" ng-if="addonsList.length === 1">
            <li class="add-on">
               <div class="add-on-picture single-addon-image">
                  <img src="{{selectedAddon.image}}">
               </div>
               <div class="add-on-content">
                  <h2>{{selectedAddon.name}}</h2>
                  <p ng-bind-html="selectedAddon.description"></p>
                  <div class="price">
                     <div class="amount">
                        <strong>+{{zestStationData.currencySymbol}}{{selectedAddon.amount}}</strong>
                        <small><span ng-show="upsellDisplayOrderAmountFirst">{{selectedAddon.amount_type_label}}&nbsp;{{selectedAddon.post_type_label}}&nbsp;</span><span ng-hide="upsellDisplayOrderAmountFirst">{{selectedAddon.post_type_label}}&nbsp;{{selectedAddon.amount_type_label}}&nbsp;</span><span ng-show="selectedAddon.display_suffix">{{selectedAddon.suffix_label}}</span></small>
                     </div>
                     <div class="action">
                        <!-- show this instead of 'add/remove' button if quantity needed -->
                        <div class="input-group" ng-show="isAddonFlatOrRoomType(selectedAddon)">
                           <button type="button" class="button" click-touch="decrementAddonQuantity()"  ng-class="{'disabled':selectedAddonCount ===0}" ng-disabled="selectedAddonCount === 0">
                              -
                           </button>
                           <input type="text" value="{{selectedAddonCount}}">
                           <button type="button" class="button" click-touch="incrementAddonQty()">
                              +
                           </button>
                        </div>
                        <!-- Replace 'btn-class' with 'transparent text-red' if 'Remove' -->
                        <!--  <button type="button" class="button" ng-hide="isAddonFlatOrRoomType(selectedAddon)" ng-class="{'transparent text-red':selectedAddon.is_selected}" click-touch="addRemoveAddOn(selectedAddon)">
                           <span ng-hide="selectedAddon.is_selected" editable-text="ADD">{{'ADD_ADDON' |translate}}</span>
                           <span ng-show="selectedAddon.is_selected" editable-text="REMOVE">{{'REMOVE_ADDON' |translate}}</span> -->
                        <div class="input-group" ng-hide="isAddonFlatOrRoomType(selectedAddon)">
                           <button type="button" class="button" click-touch="decrementAddonQtyForNonRoomFlatType()"  ng-class="{'disabled':selectedAddonCount ===0}" ng-disabled="selectedAddonCount === 0">-</button>
                           <input type="text" value="{{selectedAddonCount}}" disabled>
                           <button type="button" class="button" click-touch="incrementAddonQtyForNonRoomFlatType()" ng-class="{'disabled':selectedAddonCount ===1}" ng-disabled="selectedAddonCount === 1">+</button>
                        </div>
                        <div> 
                           <br>
                           <button type="button" data-action="popup" class="button transparent" click-touch="addOnDoneButtonClicked(selectedAddon)" editable-text="DONE" style="margin:0 auto;" ng-class="{'transparent text-red':selectedAddonCount === 0 && selectedAddon.is_selected}">
                              <text data-ng-bind-html="getTagValue('DONE_BTN')" editable-text="DONE"></text>
                           </button>
                        </div>
                     </div>
                  </div>
               </div>
            </li>
         </ul>
      </div>
      <div id="actions">
         <!-- If there is no navigation, remove the text and leave '<p class="text"></p>-->
         <p class="text">
            <text data-ng-bind-html="getTagValue('ADD_ON_FOOTER_1')" editable-text="ADD_ON_FOOTER_1"></text>
            &nbsp;{{pageData.pageStartingIndex}}-{{pageData.pageEndingIndex}}&nbsp;
            <text data-ng-bind-html="getTagValue('ADD_ON_FOOTER_2')" editable-text="ADD_ON_FOOTER_2"></text>
            &nbsp;{{addonsList.length}}&nbsp;
            <text data-ng-bind-html="getTagValue('ADD_ON_FOOTER_3')" editable-text="ADD_ON_FOOTER_3"></text>
         </p>
         <!-- Remove this .button-group element when there is no navigation -->
         <div class="button-group" ng-if="addonsList.length > 1">
            <!-- add 'disabled="disabled"' if there is no previous page -->
            <button type="button" class="button only-icon" click-touch="paginationAction(pageData.disablePreviousButton, false)" ng-hide="pageData.disablePreviousButton">
               <div ng-include="icons.url.left_arrow_icon"></div>
            </button>
            <!-- touchstart is not following ng-disable, so for now keeping two versions -->
            <button type="button" class="button only-icon" ng-show="pageData.disablePreviousButton" disabled="disabled">
               <div ng-include="icons.url.left_arrow_icon"></div>
            </button>
            <!-- add 'disabled="disabled"' if there is no next page -->
            <button type="button" class="button only-icon" click-touch="paginationAction(pageData.disableNextButton, true)" ng-hide="pageData.disableNextButton">
               <div ng-include="icons.url.right_arrow_icon"></div>
            </button>
            <!-- touchstart is not following ng-disable, so for now keeping two versions -->
            <button type="button" class="button only-icon" ng-show="pageData.disableNextButton" disabled="disabled">
               <div ng-include="icons.url.right_arrow_icon"></div>
            </button>
         </div>
         <button type="button" class="button" click-touch="addonPurchaseCompleted()">
            <text data-ng-bind-html="getTagValue('CONTINUE')" editable-text="CONTINUE"></text>
         </button>
      </div>
   </div>
</section>
<section id="main" class="addon-screen centered" role="main" ng-show="mode === 'SINGLE_ADDON_ERROR'">
   <div id="content">
      <h1 editable-text="{{errorHeader}}">{{ errorHeader | translate}}</h1>
      <h3 editable-text="{{errorMessage}}">{{errorMessage | translate}}</h3>
      <br/>
      <button type="button" class="button" click-touch="navigateToNextScreen()">
         <text data-ng-bind-html="getTagValue('CONTINUE')" editable-text="CONTINUE"></text>
      </button>
   </div>
</section>