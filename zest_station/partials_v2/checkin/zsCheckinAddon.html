<!-- Add .open to show the popup -->
<div class="popup" ng-class="{'open':showAddonPopup}">
    <div class="popup-content add-on">
        <div class="add-on-picture">
            <img src="{{selectedAddon.image}}" />
        </div>
        <div class="add-on-content">
            <h2>{{selectedAddon.name}}</h2>
            <p ng-bind-html="selectedAddon.description"></p>
            <div class="price">
                <div class="amount">
                    <strong>+{{zestStationData.currencySymbol}}{{selectedAddon.amount}}</strong>
                    <small>{{selectedAddon.amount_desc}}</small>
                </div>
                <div class="action">
                    <div class="input-group" ng-show="isAddonFlatOrRoomType(selectedAddon)">
                        <button type="button" class="button" click-touch="decrementAddonQuantity()">-</button>
                        <input type="text" value="{{selectedAddonCount}}">
                        <button type="button" class="button" click-touch="addAddonQuantity()">+</button>
                    </div>
                    <button type="button" class="button" ng-hide="isAddonFlatOrRoomType(selectedAddon)" ng-class="{'transparent text-red':selectedAddon.is_selected}" click-touch="addRemoveAddOn(selectedAddon)">
                        <span ng-hide="selectedAddon.is_selected" editable-text="ADD">{{'ADD' |translate}}</span>
                        <span ng-show="selectedAddon.is_selected" editable-text="REMOVE">{{'REMOVE' |translate}}</span>
                    </button>
                    <button type="button" data-action="popup" class="button transparent" click-touch="addOnDoneButtonClicked(selectedAddon)" editable-text="DONE">{{'DONE' |translate}}</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Add .open to show the popup -->
<div class="popup" ng-class="{'open':showErrorPopUp}">
    <!-- Remove class "open" to hide popup content -->
    <div class="popup-content">
        <h2 class="nocaps">
            <text editable-text="ADDON_ERROR_HEADER"> {{'ADDON_ERROR_HEADER' |translate}}</text>
        </h2>
        <h3> {{errorMessage}}</h3>
        <button type="button" class="button" click-touch='showErrorPopUp = false'>
            <text editable-text="DONE"> {{'DONE' |translate}}</text>
        </button>
    </div>
</div>
<!-- add .open when showing popuo -->
<div id="popup-overlay" ng-class="{'open':showAddonPopup || showErrorPopUp}"></div>
<!-- Content -->
<section id="main" class="addon-screen" role="main" ng-hide="mode === 'SINGLE_ADDON_ERROR'">
    <div id="content">
        <h1 editable-text="ADD_ON_HEADING">{{'ADD_ON_HEADING' | translate}}</h1>
       <!--  <h3> <text editable-text="ADD_ON_TOTAL_TEXT">{{'ADD_ON_TOTAL_TEXT' | translate}}</text>&nbsp;{{zestStationData.currencySymbol}}{{getAmountTotal()}}</h3> -->
        <div id="upgrades">
            <ul class="add-on-list add-on-list-columns" ng-if="addonsList.length > 1" ng-class="{'add-on-list-rows':viewableAddons.length >= 4}">
                <li class="add-on" ng-repeat="addon in viewableAddons" click-touch="addonSelected(addon)" ng-class="{'selected':addon.is_selected || addon.quantity >0}">
                    <div class="add-on-picture">
                        <img src="{{addon.image}}">
                    </div>
                    <div class="add-on-content">
                        <h2>{{addon.name}}<span ng-show="addon.quantity>0">&nbsp;({{addon.quantity}})</span></h2>
                        <div class="price">
                            {{zestStationData.currencySymbol}}{{addon.amount}}
                        </div>
                    </div>
                </li>
            </ul>
            <ul class="add-on-list" ng-if="addonsList.length === 1">
                <li class="add-on" ng-repeat="addon in viewableAddons">
                    <div class="add-on-picture">
                        <img src="{{addon.image}}">
                    </div>
                    <div class="add-on-content">
                        <h2>{{addon.name}}</h2>
                        <p ng-bind-html="addon.description"></p>
                        <div class="price">
                            <div class="amount">
                                <strong>+{{zestStationData.currencySymbol}}{{addon.amount}}</strong>
                                <small>{{addon.amount_desc}}</small>
                            </div>
                            <div class="action">
                                <!-- show this instead of 'add/remove' button if quantity needed -->
                                <div class="input-group" ng-show="isAddonFlatOrRoomType(addon)">
                                    <button type="button" class="button" click-touch="decrementAddonQuantity()">-</button>
                                    <input type="text" value="{{selectedAddonCount}}">
                                    <button type="button" class="button" click-touch="addAddonQuantity()">+</button>
                                </div>
                                <!-- Replace 'btn-class' with 'transparent text-red' if 'Remove' -->
                                <button type="button" class="button" ng-hide="isAddonFlatOrRoomType(addon)" ng-class="{'transparent text-red':addon.is_selected}" click-touch="addRemoveAddOn(addon)">
                                    <span ng-hide="addon.is_selected" editable-text="ADD">{{'ADD' |translate}}</span>
                                    <span ng-show="addon.is_selected" editable-text="REMOVE">{{'REMOVE' |translate}}</span>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div id="actions">
            <!-- If there is no navigation, remove the text and leave '<p class="text"></p>-->
            <p class="text">
                <text editable-text="ADD_ON_FOOTER_1">{{'ADD_ON_FOOTER_1' |translate}}</text>&nbsp;{{pageStartingIndex}}-{{pageEndingIndex}}&nbsp;
                <text editable-text="ADD_ON_FOOTER_2">{{'ADD_ON_FOOTER_2' |translate}}</text>&nbsp;{{addonsList.length}}&nbsp;
                <text editable-text="ADD_ON_FOOTER_3">{{'ADD_ON_FOOTER_3' |translate}}</text>
            </p>
            <!-- Remove this .button-group element when there is no navigation -->
            <div class="button-group" ng-if="addonsList.length > 1">
                <!-- add 'disabled="disabled"' if there is no previous page -->
                <button type="button" class="button only-icon" click-touch="viewPreviousPage()" ng-hide="disablePreviousButton">
                    <div ng-include="icons.url.left_arrow_icon"></div>
                </button>
                <!-- touchstart is not following ng-disable, so for now keeping two versions -->
                <button type="button" class="button only-icon" ng-show="disablePreviousButton" disabled="disabled">
                    <div ng-include="icons.url.left_arrow_icon"></div>
                </button>
                <!-- add 'disabled="disabled"' if there is no next page -->
                <button type="button" class="button only-icon" click-touch="viewNextPage()" ng-hide="disableNextButton">
                    <div ng-include="icons.url.right_arrow_icon"></div>
                </button>
                <!-- touchstart is not following ng-disable, so for now keeping two versions -->
                <button type="button" class="button only-icon" ng-show="disableNextButton" disabled="disabled">
                    <div ng-include="icons.url.right_arrow_icon"></div>
                </button>
            </div>
            <button type="button" class="button" click-touch="addonPurchaseCompleted()" edit-text="CONTINUE">{{'CONTINUE' | translate}}</button>
        </div>
    </div>
</section>
<section id="main" class="addon-screen centered" role="main" ng-show="mode === 'SINGLE_ADDON_ERROR'">
    <div id="content">
        <h1 editable-text="ADDON_ERROR_HEADER">{{'ADDON_ERROR_HEADER' | translate}}</h1>
        <h3>{{errorMessage}}</h3>
        <br/>
        <button type="button" class="button" click-touch="navigateToNextScreen()" edit-text="CONTINUE">{{'CONTINUE' | translate}}</button>
    </div>
</section>